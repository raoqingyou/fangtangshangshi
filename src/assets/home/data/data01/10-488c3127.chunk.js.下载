(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"./src/layout/BaseLayout/Modal/ExceptionMsgModal.js":function(e,t,a){"use strict";var n=a("./node_modules/@babel/runtime/helpers/interopRequireWildcard.js"),o=a("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("./node_modules/antd/es/pagination/style/css.js");var s=o(a("./node_modules/antd/es/pagination/index.js")),l=o(a("./node_modules/@babel/runtime/regenerator/index.js")),d=o(a("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"));a("./node_modules/antd/es/table/style/css.js");var r=o(a("./node_modules/antd/es/table/index.js"));a("./node_modules/antd/es/button/style/css.js");var i=o(a("./node_modules/antd/es/button/index.js"));a("./node_modules/antd/es/message/style/css.js");var c=o(a("./node_modules/antd/es/message/index.js"));a("./node_modules/antd/es/checkbox/style/css.js");var u=o(a("./node_modules/antd/es/checkbox/index.js"));a("./node_modules/antd/es/modal/style/css.js");var m=o(a("./node_modules/antd/es/modal/index.js")),f=o(a("./node_modules/@babel/runtime/helpers/classCallCheck.js")),p=o(a("./node_modules/@babel/runtime/helpers/createClass.js")),g=o(a("./node_modules/@babel/runtime/helpers/inherits.js")),h=o(a("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),b=o(a("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),x=n(a("./node_modules/react/index.js")),y=(a("./node_modules/antd/es/index.js"),a("./node_modules/dva/index.js")),v=o(a("./src/images/home/left.png")),j=o(a("./src/images/home/right.png")),w=o(a("./src/api/index.js")),k=a("./src/utils/request.js");function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,b.default)(e);if(t){var o=(0,b.default)(this).constructor;a=Reflect.construct(n,arguments,o)}else a=n.apply(this,arguments);return(0,h.default)(this,a)}}var M=x.default.lazy((function(){return Promise.all([a.e(0),a.e(1)]).then(a.t.bind(null,"./src/components/ViewRichTextModal/index.js",7))})),C=function(e){(0,g.default)(n,e);var t=_(n);function n(e){var a;return(0,f.default)(this,n),(a=t.call(this,e)).state={agreeChecked:!1,viewRichTextModal:!1},a.closeModal=function(){(0,a.props.dispatch)({type:"global/setAttrValue",payload:{dialogShow:{exceptionMsgModal:!1},dialogData:{exceptionMsgModalData:{loading:!0,tableList:[]}}}})},a.agreeChange=function(e){var t=e.target.checked;a.setState({agreeChecked:t}),t&&a.setState({viewRichTextModal:!0})},a.closeViewRichTextModal=function(){a.setState({viewRichTextModal:!1})},a.showConfirm=function(e,t){m.default.confirm({title:"是否同意以下政策",content:x.default.createElement(u.default,{onChange:a.agreeChange,value:a.state.agreeChecked},"同意",x.default.createElement("a",{onClick:function(){(0,k.downloadFile)("金融机构使用企业数据声明")}},"《高安市企业综合金融服务平台金融机构使用企业数据声明》")),onOk:function(){a.state.agreeChecked?window.open(window.location.origin+"/bank/enterprisePortrait?creditNo="+e+"&corpName="+t):c.default.warning("请确认同意高安市企业综合金融服务平台金融机构使用企业数据声明"),a.setState({agreeChecked:!1})},onCancel:function(){a.setState({agreeChecked:!1})}})},a.columns=[{title:"公司名称",dataIndex:"companyName",key:"companyName",width:260},{title:"消息描述",dataIndex:"message",key:"message",align:"center"},{title:"操作",key:"operate",width:260,align:"center",render:function(e){return x.default.createElement(i.default,{className:"view-map-btn",onClick:function(){a.checkPermission(e.creditNo,e.companyName)}},"查看企业画像")}}],a}return(0,p.default)(n,[{key:"checkPermission",value:function(e,t){var a=this,n={creditNo:e};w.default.user.checkPermission({params:n}).then((function(n){n.data.data?a.showConfirm(e,t):c.default.error("该企业暂未提供授权完整授权资料，无法查看画像")}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.globalStore,o=t.dispatch,i=n.dialogShow,c=void 0===i?{}:i,u=n.dialogData,f=void 0===u?{}:u,p=c.exceptionMsgModal,g=f.exceptionMsgModalData,h=void 0===g?{}:g,b=h.loading,y=h.tableList,w=void 0===y?[]:y,k=h.current,_=h.total;return x.default.createElement(m.default,{visible:p,width:960,footer:null,closeIcon:x.default.createElement("img",{src:a("./src/layout/BaseLayout/images/取消@2x.png"),className:"close-img"}),className:"exception-message-modal",onCancel:function(){e.closeModal()}},x.default.createElement("div",{className:"exception-message-title"},x.default.createElement("img",{src:v.default}),x.default.createElement("h2",null,"企业异常消息提醒"),x.default.createElement("img",{src:j.default})),x.default.createElement(r.default,{columns:this.columns,dataSource:w||[],loading:b,pagination:!1,className:"exception-message-table"}),x.default.createElement("div",{className:"page-global-body-pagination"},x.default.createElement("span",{className:"count"},"共 ",_||0," 条记录"),x.default.createElement(s.default,{onChange:function(){var e=(0,d.default)(l.default.mark((function e(t,a){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o({type:"global/setAttrValue",payload:{dialogData:{exceptionMsgModalData:{loading:!0,current:t}}}});case 2:return e.next=4,o({type:"global/getExceptionMsg",payload:{}});case 4:case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),total:_,current:k})),x.default.createElement(x.Suspense,{fallback:null},x.default.createElement(M,{visible:this.state.viewRichTextModal,closeModal:this.closeViewRichTextModal,section:"金融机构使用企业数据声明"})))}}]),n}(x.PureComponent),E=(0,y.connect)((function(e){return{globalStore:e.global}}))(C);t.default=E},"./src/layout/BaseLayout/images/取消@2x.png":function(e,t,a){e.exports=a.p+"9be7802f05ebab6d212097558b66ff82.png"}}]);