_jsload_('mouse', 'g.Rb.Hb({nN:"_docMsMov",Bca:function(){var a=this.Xa.$c;g.F.h(a,"mousedown",this.M4,this);g.F.h(document,"mousedown",this.S4,this);this.Apa||g.l.Ue||(this.bw=g.a.LD(this.bw,150,this),this.Apa=!0);this.o7();g.F.h(document,"mouseout",this.bw,this);this.h(this.nN,this.G6,this);g.F.h(a,"mouseover",this.N4,this);g.F.h(a,"mouseup",this.O4,this);g.F.h(a,"contextmenu",this.IF,this);g.F.h(a,"rightclick",this.IF,this)},vha:function(){var a=this.Xa.$c;g.F.G(a,"mousedown",this.M4,this);g.F.G(document,"mousedown", this.S4,this);this.Fna();g.F.G(document,"mouseout",this.bw,this);this.G(this.nN,this.G6,this);g.F.G(a,"mouseover",this.N4,this);g.F.G(a,"mouseup",this.O4,this);g.F.G(a,"contextmenu",this.IF,this);g.F.G(a,"rightclick",this.IF,this)},Dca:function(){g.F.h(this.Xa.$c,"mousewheel",this.L4,this)},l_:function(){g.F.G(this.Xa.$c,"mousewheel",this.L4,this)},Gna:function(){g.F.G(document,"mousemove",this.bw,this);g.F.G(this.Xa.$c,"mousemove",this.WR,this)},o7:function(){g.F.h(document,"mousemove",this.bw,this); g.F.h(this.Xa.$c,"mousemove",this.WR,this)},Fna:function(){g.F.G(document,"mousemove",this.bw,this);g.F.G(this.Xa.$c,"mousemove",this.WR,this)},N4:function(){this.GG=!0},S4:function(){this.GG=!1},bw:function(a){if(!this.Jf&&!this.rg&&this.Xa){var b=this.Li(a,!0,!0);this.q(this.nN,{event:a,PJ:b})}},Cca:function(){this.h("mousemove",this.J_);this.h("mouseout",this.K_);this.h("mouseover",this.L_);this.h("mouseup",this.M_);this.h("mousedown",this.I_);this.h("rightclick",this.O_);this.h("contextmenu", this.A_);this.h("rdblclick",this.P_)},xha:function(){this.G("mousemove",this.J_);this.G("mouseout",this.K_);this.G("mouseover",this.L_);this.G("mouseup",this.M_);this.G("mousedown",this.I_);this.G("rightclick",this.O_);this.G("contextmenu",this.A_);this.G("rdblclick",this.P_)},keyboardEnableChanged:function(){this.get("keyboardEnable")?this.zca():this.yO()},scrollWheelChanged:function(){this.get("scrollWheel")?this.h("mousewheel",this.N_):this.G("mousewheel",this.N_)},IF:function(a){g.F.preventDefault(a)}, mha:function(a){var b=this.Li(a,!1,!0),c=0;"3D"==this.D.view.type?(this.qa("mousewheel",b),a.wheelDelta?(c=a.wheelDelta,window.opera&&g.a.Ph(window.opera.version)&&9.5>parseFloat(window.opera.version())&&(c=-c),0==c/120%1&&(c/=2)):a.detail&&(c=-a.detail,120!==c&&-120!==c&&(c*=20)),a=c/800,a=this.get("zoom")+a,this.r2(a,b.Ta,!0)):(a.wheelDelta?(c=a.wheelDelta/120,window.opera&&g.a.Ph(window.opera.version)&&9.5>parseFloat(window.opera.version())&&(c=-c)):a.detail&&(c=-a.detail),this.V.TC=(this.V.TC|| 0)+c,this.q("mousewheel",b))},L4:function(a){"info"!=a.$e&&this.get("scrollWheel")&&this.mha(a)},ZR:function(a,b){b=this.Li(a,!1,!0);if(!this.Nv(b.Cb,this.V.Cx)){var c=this.V;c.Cx=b.Cb;if(c.zr){if(!c.Ad&&(b.Cb.x!==c.io.x||b.Cb.y!==c.io.y)){var d;this.WN(c.Yt)&&c.Yt.get("draggable")&&(d=c.Yt);!d&&this.get("dragEnable")&&(d=this);d&&(c.Ad=!0,c.iq=d,c.fg=c.io,c.hq=c.IT)}c.Ad&&(c.ak=b,b.button=a.buttons||a.button||0,this.QO())}}},oJ:function(){var a=this.PJ;g.f.eb(this.K,"amap-drag");g.f.xpa();g.f.n3(); this.V&&(this.V.Ad=!1);this.V.Dp&&(this.V.Dp=!1,this.V.iq.q("dragend",a));this.V.zr=!1;this.V.Cx=null;this.V.fg=null;g.F.G(document,"mousemove",this.ZR,this);g.F.G(document,"mouseup",this.oJ,this);try{g.F.G(window.parent.document,"mouseup",this.oJ,this)}catch(b){}this.Xa&&(this.Jf&&(this.rg=this.Jf=!1),g.F.rza(this.Xa.$c),this.o7())},Ira:function(a,b){b=b||this.Li(a,!1,!1,a.srcElement||a.target);var c=this.get("size"),d;0<=b.Cb.x&&b.Cb.x<=c.width&&0<=b.Cb.y&&b.Cb.y<=c.height&&(d=!0);this.F5&&!d?this.q("mouseout", b):!this.F5&&d&&this.q("mouseover",b);this.F5=d},WR:function(a){if(!this.Jf&&!this.rg&&this.Xa&&"info"!=a.$e&&(g.F.preventDefault(a),g.l.Ds&&(a=window.event),a)){a=this.Li(a,!1,!1,a.srcElement||a.target);var b=this.V,c=a.hd,d;if(c){this.V.zr||(c instanceof g.B.Eh?d=c.Lb.get("cursor"):c instanceof g.o.Yb&&(d=c.get("cursor")),d&&c!==this||(d=this.D.Ce.defaultCursor),d=this.D.get("optimalCursor")||d,this.K.style.cursor=d||"");d=b.Nga;var e=a.ru;d!==e&&(d&&b.TZ&&b.TZ.q("mouseout",a),e&&c&&(c.q("mouseover", a),c.get("topWhenMouseOver")&&(c.Lb.C=!0,c.Lb.setTop(!0),c.Lb.C=!1)));a.hd.q("mousemove",a);a.hd!==this&&this.q("mousemove",a);b.Nga=a.ru||null;b.TZ=a.hd||null}}},M4:function(a){if("info"!=a.$e&&(this.GG=!0,g.f.Ooa(),g.f.a3(),this.V.Cx=null,this.V.fg=null,"info"!=a.$e)){var b=this.Li(a,!0,!1,a.srcElement||a.target);if(b.hd){this.V.e3=new Date;this.V.Yt=b.hd;this.V.io=b.Cb;this.V.Jga=b.button;this.V.zr=!0;this.V.Kga=b;this.V.Ad||(this.V.IT=b);this.He&&this.He.stop();var c=b.hd;!c.Lb&&c.get("dragEnable")&& (this.V.zr=!0);g.f.Wa(this.K,"amap-drag");c=!1;b.hd.q("mousedown",b);b.hd!==this&&(this.q("mousedown",b),c=b.hd.get("draggable"));c=c||this.get("dragEnable");g.F.qxa(this.Xa.$c);g.F.h(document,"mousemove",this.ZR,this);g.F.h(document,"mouseup",this.oJ,this);try{window.parent.document&&g.l.Ds&&g.F.h(window.parent.document,"mouseup",this.oJ,this)}catch(d){}g.F.stopPropagation(a);c&&this.Gna()}}},G6:function(a){this.Ira(a.event,a.PJ)},zDa:function(a){this.ZR(a.event,a.PJ)},O4:function(a){if("info"!= a.$e){this.PJ=a=this.Li(a,!1,!1,a.srcElement||a.target);var b=a.hd;if(b){var c=this.D.get("allBubble")||b.get("bubble");b!==document&&(b.q("mouseup",a),a.hd!==this&&c&&this.q("mouseup",a));this.V.io&&this.Nv(a.Cb,this.V.io)&&(this.ag&&this.Nv(this.V.zx,a.Cb)&&a.button===this.V.Jga?(clearTimeout(this.ag),this.ag=null,g.F.L5(a)?c?(b.q("dblclick",a),b!==this&&this.q("dblclick",a)):b.q("dblclick",a):b.q("rdblclick",a),this.V.zx=null):(g.F.L5(a)?(this.q("clickstart",a),c?(b.q("click",a),b!==this&&this.q("click", a)):(b.q("click",a),this.q("closeOverlays",a)),b.get("topWhenClick")&&(b.Lb.C=!0,b.Lb.setTop(!0),b.Lb.C=!1),this.q("clickend",a)):c?(b.q("rightclick",a),b!==this&&this.q("rightclick",a),this.q("contextmenu",a)):(b.q("rightclick",a),b.q("contextmenu",a)),this.V.zx=a.Cb,this.ag&&clearTimeout(this.ag),this.ag=setTimeout(g.a.bind(function(){clearTimeout(this.ag);this.ag=null;this.V.zx=null},this),260)))}}}});g.Rb.Hb({N_:function(a){this.qa("mousewheel",a);var b=this;if(1<=Math.abs(this.V.TC)&&!this.L$){var c=this.V.TC;if(1<=c)c=1;else if(-1>=c)c=-1;else return;b.cH(a.Ta,c);this.V.TC=0;this.L$=!0;setTimeout(function(){b.L$=!1;b.V.TC=0},g.l.nz?50:40)}},J_:function(a){this.qa("mousemove",a)},K_:function(a){this.qa("mouseout",a)},L_:function(a){this.qa("mouseover",a)},M_:function(a){this.qa("mouseup",a)},I_:function(a){this.qa("mousedown",a)},O_:function(a){this.qa("rightclick",a)},A_:function(a){this.qa("contextmenu", a)},P_:function(a){this.get("doubleClickZoom")&&this.get("zoomEnable")&&this.cH(a.Ta,-1);this.qa("rdblclick",a)}});g.Rb.Hb({pga:function(){this.zB={left:[37],right:[39],EQ:[40],bF:[38],Pi:[187,107,61],Qi:[189,109,173]};this.lda={left:this.Yx(this.aH(100,0)),right:this.Yx(this.aH(-100,0)),EQ:this.Yx(this.aH(0,-100)),bF:this.Yx(this.aH(0,100)),Pi:this.Yx(this.F1(1)),Qi:this.Yx(this.F1(-1))}},zca:function(){this.get("keyboardEnable")&&(this.zB||this.pga(),g.F.h(document,"keydown",this.ZG,this),g.F.h(document,"keyup",this.w_,this))},yO:function(){g.F.G(document,"keydown",this.ZG,this);g.F.G(document,"keyup",this.w_, this)},w_:function(a){var b=a.keyCode;!a.ctrlKey||37!==b&&39!==b||this.set("refresh",1)},ZG:function(a){var b=a.keyCode,c;for(c in this.zB)if(this.zB.hasOwnProperty(c))for(var d=0;d<this.zB[c].length;d+=1)if(b===this.zB[c][d]){if(!this.GG)return;if(!a.ctrlKey&&!a.shiftKey){this.lda[c]();g.F.preventDefault(a);return}37===b?(this.Sga(),g.F.preventDefault(a)):39===b?(this.Rka(),g.F.preventDefault(a)):38===b?(this.Oja(),g.F.preventDefault(a)):40===b&&(this.Nja(),g.F.preventDefault(a))}},Yx:function(a){return function(){a()}}, Sga:function(){this.get("rotateEnable")&&(this.q("rotate"),this.set("rotation",-8+parseFloat(this.get("rotation"))%360))},Rka:function(){this.get("rotateEnable")&&(this.q("rotate"),this.set("rotation",8+parseFloat(this.get("rotation"))%360))},Nja:function(){this.get("rotateEnable")&&this.set("pitch",-4+parseFloat(this.get("pitch")))},Oja:function(){this.get("rotateEnable")&&this.set("pitch",4+parseFloat(this.get("pitch")))},F1:function(a){var b=this.D;return function(){b.C=!0;1===a?b.zoomIn():b.zoomOut(); b.C=!1}},aH:function(a,b){var c=this.D;return function(){c.C=!0;c.panBy(a,b);c.C=!1}}}); ');_jsload_('vectorlayer', 'g.ik={d$:function(){0===g.Da.Je&&g.ik.V4()},hIa:function(a,b){if(!a)return!1;for(var c=0,d=a.length;c<d;c++)if(a[c]&&a[c].Bk===b)return!0},xna:function(a,b){var c="limg-"+a.key+"-"+b.g.lc;g.Da.Fj[c]&&delete g.Da.Fj[c]},P3:function(a){return g.Da.Fj[a.Bk?a.Bk:a]},tm:function(a,b){var c=null,d=null,e=!1,f=g.Da.Fj;a.Bk?(c=a,d=c.Bk,(a=c.url)&&(e=!0)):d=a;var h=f[d];e&&h&&h.src!==a&&(h=f[d]=null);if(!h){var e=function(a){this.pJ(a);g.a.Ph(b)&&b(!0,{uJ:a.target})},k=function(a){this.U4(a);g.a.Ph(b)&&b(!1, {uJ:a.target})};if(a){var l="data:"===a.substr(0,5),h=document.createElement("img");l||(h.crossOrigin="Anonymous");f[d]=h;h.loaded=!1;g.Da.Je+=1;g.F.Cj(h,"load",e,this);g.F.Cj(h,"error",k,this);var m=this;h.fr=g.a.dg();l||void 0!==this.dQ||(this.dQ=setInterval(function(){if(0===g.Da.Je||0===g.Da.jr.length)clearInterval(m.dQ),m.dQ=void 0;else{var a=g.a.dg(),b=g.Da.Fj,c=!1,d;for(d in b)if(b.hasOwnProperty(d)){var e=b[d];!e.loaded&&!e.timeout&&300<=a-e.fr&&(c=e.timeout=!0)}c&&m.V4()}},100));h.src=a; c&&(h.ECa=d)}}},V4:function(){for(var a=0;a<g.Da.jr.length;a+=1)g.Da.jr[a].set("display")},z2:function(a){g.F.G(a,"load",this.pJ,this);g.F.G(a,"error",this.U4,this)},pJ:function(a){a=a.target;a.loaded=!0;g.Da.Je-=1;this.z2(a);this.d$()},U4:function(a){a=a.target;a.loaded=!1;g.Da.Je-=1;this.z2(a);this.d$()}};g.o.ei=g.o.Yb.extend({A:function(a,b,c){this.Wl=c;g.Da.jr.push(this);this.lc=g.a.e4("layer");this.Ua=2;a.get("textRatio");this.cW=25;this.X("tiles",a);this.Gza=a.get("vdataUrl")||b.D.get("vdataUrl")||g.r.uL;this.Di=!0;this.S=a;this.Il=!1;this.e=b;this.Zi=this.Yi=!0;this.af("zoom center centerCoords resolution coordsBound styleID iconsID businessIconsID forceBig mode display".split(" "),b);this.af("zooms detectRetina visible merge sort zIndex textIndex watermark opacity".split(" "),a);this.X("lang", b,!0);this.get("watermark")&&(this.zL=new Image,this.zL.src=this.get("watermark"));this.sL="v4";this.oa={};this.em={};this.Dd=256;this.Iv=[];this.Af=this.ig=0;this.ja=g.l.ja&&this.get("detectRetina");this.Dd=256*(this.ja?2:1);this.X("mapStyle",b);this.X("style",b);this.dq=0;this.X("features",b);this.ff=18;this.X("reload",a)},mapStyleChanged:function(){this.get("mapStyle");this.Ae=!!this.e.get("showBuildingBlock");this.featuresChanged()},featuresChanged:function(){this.set("reload")},langChanged:function(){this.set("reload"); this.S.Zs()},vla:function(){var a=!1,b=this.aZ();if(b){if(this.Wi){var c="active"===this.Wi.qB;b.VA(this.Wi);c&&(b.Tt(this.Wi,"active"),a=!0)}g.l.rna&&!a&&b.yH()}},MA:function(){this.vla()},YE:function(a,b){var c=!0;if("hotspotout"===a)this.e.D.set("optimalCursor",null);else if("hotspotover"===a)this.e.D.set("optimalCursor","pointer");else if("mouseup"===a||"mousedown"===a)c=!1;var d=this.aZ();if(d)switch(a){case "hotspotout":d.DH(b);break;case "hotspotover":d.Tt(b,"hover");break;case "mouseup":d.Tt(b, "hoverup");break;case "mousedown":d.Tt(b,"active")}c&&(c=b.za,c=new g.H(c[0],c[1]),c=this.e.Od(c,3),this.e.D.q(a,{name:b.name,lnglat:c,id:b.Vs,isIndoorPOI:b.H5}))},aZ:function(){if(!g.l.h5){var a=this.M||this.Bf;if(!a)return null;var b=this.e?this.e.D.get("hotspotOptions"):{},b=g.extend({},b);if(b.disableHighlight)return null;this.dC||(this.dC=new g.o.ei.pba(a));return this.dC}},Cr:function(a){(a=this.q4(a))&&this.YE("hotspotclick",a)},Jx:function(a){var b="mousemove"===a.type;if(!this.e.rg||!b){var c= this.q4(a);c&&c.lk||(c=null);switch(a.type){case "mousemove":case "mouseup":case "mousedown":c&&this.Wi!==c&&(this.Wi&&this.YE("hotspotout",this.Wi),this.YE("hotspotover",c)),!c&&this.Wi&&this.YE("hotspotout",this.Wi),c&&!b&&this.YE(a.type,c)}this.Wi=c}},textIndexChanged:function(){this.set("display")},Uua:function(){this.e.h("click",this.Cr,this);this.e.h("mousemove",this.Jx,this);this.e.h("mousedown",this.Jx,this);this.e.h("mouseup",this.Jx,this)},hQ:function(){this.e.G("click",this.Cr,this);this.e.G("mousemove", this.Jx,this);this.e.G("mousedown",this.Jx,this);this.e.G("mouseup",this.Jx,this)},Oo:function(){return null},me:function(){var a=this.vv?null:this.e.D.get("forceZooms");return{Di:!0,Dd:256,visible:this.get("visible"),po:this.po,Ya:a||this.get("zooms"),ZH:this.Il&&this.Ra,Yi:!this.e.mt,Zi:!this.e.mt,opacity:this.get("opacity"),Jc:!1,Nc:this.yn()}},$l:function(a){if(g.M.canvas.ei)return new g.M.canvas.ei(this,a)},AC:function(a){0===a.indexOf("amap://styles/")&&(a="normal");var b=this.get("forceBig")|| g.l.ba&&!this.ja?"6":"5";this.url=g.r.tc+"://"+this.Gza+"/tiles?mapType="+a+"&v="+(g.Te?3:2)+"&style="+b;this.url+="&key="+g.r.key;this.url+="&version="+g.r.ln;this.url+=this.ja?"&rd=2":"&rd=1";this.url+="&flds="+this.ga;this.url+="&t="},styleChanged:function(){this.e.Bd||this.featuresChanged()}}); g.o.od=g.o.ei.extend({$l:function(a){var b=this;if(!b.zL&&g.l.Mf&&"vw"===b.e.get("baseRender")){var c=["wgl"];this.e.Bd&&c.push("wgl2");if(g.tb.ID(c))return new g.M.Xe.od(b,a)}else if(c=["cgl"],this.e.Bd&&c.push("cgl2"),g.tb.ID(c))return new g.M.canvas.od(b,a);g.tb.Fg(c,function(){b.set("display")})},featuresChanged:function(){var a=this.get("features"),b=[];"all"===a?b=this.Wl:a&&(-1!==g.a.indexOf(a,"bg")&&-1!==g.a.indexOf(this.Wl,"region")&&b.push("region"),-1!==g.a.indexOf(a,"building")&&-1!== g.a.indexOf(this.Wl,"building")&&b.push("building"),-1!==g.a.indexOf(a,"road")&&-1!==g.a.indexOf(this.Wl,"road")&&b.push("road"));this.ga=b;this.AC(this.get("mapStyle")||"normal");this.set("reload")}});g.o.Dba=g.o.od.extend({A:function(){this.Ch(arguments);this.ff=this.Xo=17;this.ga=["building"];this.Ae=!0;this.AC(this.get("mapStyle")||"normal");this.vv=!0},featuresChanged:function(){},mapStyleChanged:function(){}}); g.o.Pj=g.o.ei.extend({$l:function(a){this.Ci=!0;var b=this;if(this.oS()){if(this.jA=!0,g.M.canvas.nM)return this.g2(),a=new g.M.canvas.nM(this,a),a.h("afterLabelRender",this.MA,this),a}else{b.jA=!1;if(g.M.canvas.mM)return a=new g.M.canvas.mM(this,a),a.h("afterLabelRender",this.MA,this),a;g.tb.Fg(["labelcanvas"],function(){b.set("display")})}},oS:function(){var a=this.get("mapStyle");return"normal"!==a&&"amap://styles/normal"!==a||this.e.get("nolimg")?!1:g.l.jA?!0:!1},asa:function(){var a=this.get("mapStyle"); return"normal"!==a&&"amap://styles/normal"!==a||this.e.get("nolimg")||g.l.Jc||g.l.ba?!1:!0},featuresChanged:function(){var a=this.get("features"),b=this.get("mapStyle"),c=[];"all"===a?c=["roadlabel","poilabel"]:a&&(-1!==g.a.indexOf(a,"road")&&c.push("roadlabel"),-1!==g.a.indexOf(a,"point")&&c.push("poilabel"));a=this.oS();c.length&&(a||this.asa())&&c.unshift("limg");this.ga=c;this.AC(b);this.set("reload");(b=this.M||this.Bf)&&a^this.jA&&(this.dC&&(this.dC=this.dC.M=null),b.G("afterLabelRender",this.MA, this),b.$j(),this.Bf=this.M=null)},g2:function(){this.Av=g.r.tc+"://"+(this.S.get("vdataUrl")||this.e.D.get("vdataUrl")||g.r.uL)+"/limg?";var a=this.ja?2:1;this.Av+="&font="+(g.l.ba&&!this.ja?"big":"small");this.Av+="&scl="+a;this.Av+="&t="},q4:function(a){return a.Nf?(a=this.Z3(this.e.kc(a.Nf,20),!0))?a[0]:null:null},Z3:function(a,b){var c=this.e.Oy();if(c&&(c=c.ys(this)))return c.wn(a,b)}});g.o.ei.pba=g.da.extend({A:function(a){this.$ka(a)},$ka:function(a){this.M=a},DH:function(a){if(a.qB){a.qB=!1;var b=this.M;b&&b.DH.apply(b,arguments)}},VA:function(a){a.qB=!1;var b=this.M;b&&b.VA.apply(b,arguments)},Tt:function(a,b){b||(console.warn("hlStyle is required, e.g. hover, active.."),b="hover");if(a.qB!==b){a.qB=b;var c=this.M;c&&c.Tt.apply(c,arguments)}},yH:function(){var a=this.M;a&&a.yH()}});g.o.Yw=g.da.extend({A:function(){this.Ua=2;this.cW=g.l.Xl?16:12;this.exa={road:0,region:0,building:1,poilabel:1,roadlabel:1};this.kw=[new g.og,new g.og,new g.og,new g.og,new g.og,new g.og,new g.og];this.Iza=[{type:"roadlabel",show:!0,Bi:1},{type:"poilabel",show:!0,Bi:1},null,{type:"region",show:!0,Bi:0},{type:"road",show:!0,Bi:0},{type:"building",show:!0,Bi:0},null];this.dq=0},ty:function(a,b,c,d,e){if("first"!==b){c&&(c.Md=d);var f;switch(e){case "roadlabel":f=0;break;case "poilabel":f=1;break;case "labels":f= 2;break;case "region":f=3;break;case "road":f=4;break;case "building":f=5;break;case "allbase":f=6}d=this.kw[f].pza;c&&c.Ie&&(d=this.kw[f].push);"groupcomplete"===b?d.call(this.kw[f],["groupcomplete",f,c,a]):"tileComplete"===b?d.call(this.kw[f],["co",7,c,a]):(d.call(this.kw[f],["co",f,c,a]),""!==b&&d.call(this.kw[f],[b,f,c,a]));this.dq>f&&(this.dq=f);this.Xxa()}},D7:function(){var a=new Date,b=!1;do if(b=this.parse(),new Date-a>=this.cW)break;while(!b);this.v7=b?null:g.a.Wc(this.D7,this)},Xxa:function(){this.v7|| (this.v7=g.a.Wc(this.D7,this))},noa:function(){return document.createElement("canvas")},parse:function(){var a,b=!1,c=this.dq,d=this.kw[this.dq];if(d.uh())6===c&&(b=!0),this.dq=(this.dq+1)%7;else{a=d.tua();var e=a[3],f=e.ja?512:256;if("groupcomplete"===a[0])e.set("display",0);else{var h=a[2];if(e.oa.Ld(h.key))if("co"===a[0])if(3===a[1])this.JT(e,h,f),h.ra.region&&e.Za.IK(h.ra.region,0,h.ta.z);else if(4===a[1])this.JT(e,h,f),h.ra.road&&e.Za.u8(h.ra.road,h.ta.z);else if(5===a[1]&&h.ra&&h.ra.building)a= g.Mj&&g.Mj.G5(e.e.D),e.Ae?h.tf=h.ra.building:(this.JT(e,h,f),e.Za.IK(h.ra.building,1,h.ta.z,void 0,a));else{if(7===a[1]){h.jd&&(e.zL&&0===(h.ta.x+h.ta.y)%2&&h.jd.getContext("2d").drawImage(e.zL,0,0),h.sma=!0,g.l.ED&&h.jd.toDataURL&&(f=new Image,f.src=h.jd.toDataURL(),h.jd=f));if("3D"===(e.e.D&&e.e.D.getViewMode_())){if(h.ll){h.ll.bf=null;h.Uh=null;a=e.e.Gc;if(e.Bf&&a.Bf){c=a.Bf.aI(a.Bf.ca,h.ll);c.lc=a.Bf.lc;a={mi:c,tagName:"CANVAS",width:h.ll.width,height:h.ll.height};c=0;for(f=h.ga.length;c<f;c+= 1)for(var k=h.ga[c],l=0,m=k.Da.length;l<m;l+=1)k.Da[l]==h.ll&&(k.Da[l]=a);h.ga.sya=!0}h.ll=null}}else a[3].e.J.ae&&this.C3(h);h.uua||(h.Ra=h.Ba=!0);e.set("display")}}else g.Iaa.uva(h,a[0],this.Iza[a[1]].type,e)}d.uh()&&(6===c&&(b=!0),this.dq=(this.dq+1)%7)}return b},JT:function(a,b,c){a.Za||(a.Za=new g.M.canvas.od.fd(a),a.Za.J=a.e.J);var d=1;18==b.ta.z&&(d=a.S.get("map",null,!0).get("zooms")[1],d=Math.pow(2,18-d));b.jd||(b.jd=this.noa(),b.jd.width=b.jd.height=c/d,b.sma=!1);b.jd&&(a.Za.xa=b.jd,a.Za.Gg= d,a.Za.Qb=1/d)},C3:function(a){if(a.ga)for(var b=0,c=a.ga.length;b<c;b++){var d=a.ga[b];if(d.lk){var e=this.Ud(d),f=d.Da.length;if(d.qc)for(var h=0,k=d.qc.length;h<k;h++)this.$ma(d,h,e,f)}}},$ma:function(a,b,c,d){d+=b;var e=a.qc[b][8],f=a.fontSize,h=a.tI,k=parseInt(f/h*e[2]),l=e[3]+f-h,m=k-e[2],f=f-h;switch(c){case "middle":a.aa[d][0]=e[0]-(k-e[2])/2;a.aa[d][1]=e[1]-(l-e[3])/2;break;case "left":a.aa[d][0]=e[0]-(k-e[2])/2+m/2;a.aa[d][1]=e[1]-(l-e[3])/2+f*b;break;case "right":a.aa[d][0]=e[0]-(k-e[2])/ 2-m/2;a.aa[d][1]=e[1]-(l-e[3])/2+f*b;break;case "top":a.aa[d][0]=e[0]-(k-e[2])/2;a.aa[d][1]=e[1]-(l-e[3])/2+(2*b+1)/2*f;break;case "bottom":b=(2*(a.qc.length-b-1)+1)/2*f;a.aa[d][0]=e[0]-(k-e[2])/2;a.aa[d][1]=e[1]-(l-e[3])/2-b;break;default:a.aa[d][0]=e[0]-(k-e[2])/2,a.aa[d][1]=e[1]-(l-e[3])/2}a.aa[d][2]=k;a.aa[d][3]=l},nD:function(a){return Math.abs(a[2]/2+a[0])},oD:function(a){return Math.abs(a[3]/2+a[1])},Ud:function(a){var b=a.aa;if(1===b.length)return"";var c=b[0],d=b[1];return b.length===a.Da.length? "top":1>=this.nD(c)&&1>=this.nD(d)?1>=this.oD(c)&&1>=this.oD(d)?"middle":c[1]<d[1]?"top":"bottom":c[0]<d[0]?"left":"right"}});g.o.Yw.Ai=new g.o.Yw;g.Xw={yC:function(a,b){this.e.D.vq&&(this.tg={},this.tg.WEa=g.a.yb(this.tg),b.Kc||(b.Kc=g.FW()),this.Kc=b.Kc,this.Kc.h("tiles",this.bE,this),this.Kc.h("ack",this.aE,this),this.Kc.h("disable",this.ZD,this))},oza:function(){this.e.D.vq&&(this.tg=null,this.Kc&&(this.Kc.G("tiles",this.bE,this),this.Kc.G("ack",this.aE,this),this.Kc.G("disable",this.ZD,this),this.Kc=null))},Xx:function(){if(!1===this.e.D.get("workerMode"))return!1;g.Jk.u5||this.xZ(g.Jk);g.Ec.u5||(this.xZ(g.Ec),g.Ec.tS&&z.event.ay(this.e.D, "complete",function(){g.Ec.tS()}));if(this.Ci&&!this.So&&g.Jk.Kza||this.So&&g.Jk.fta||!this.So&&!this.Ci&&this.Di&&g.Ec.q5)return!0},xZ:function(a){a.wf(null,{Te:g.Te});a.u5=!0},Zga:function(a){g.a.Tb(a,function(a){g.ik.tm(a)})},zz:function(a){if(this.g&&a.LS===this.g.lc){this.ge||this.gf?this.QB([this.g,"groupcomplete",null,null,"allbase"]):(this.ck(),this.Uj.ty(this.g,"groupcomplete",null,null,"allbase"));for(var b=0,c=a.Oc.length;b<c;b+=1)this.cE(a.Oc[b],a.jz,a.Qq,a.ba)}},cE:function(a,b){var c= a.Ed,d=this.oa.get(a.Oi);if(d){var e=this.g.ga,f="";(this.e.Bm&&!this.e.Bd||this.e.Bd)&&this.OI(c,a.Oa,a.Hg.z);"poilabel"===c||"roadlabel"===c?(a.qd||(f=a.Oa,a.qd=null),d.ga||(d.ga=[]),d.ga.push.apply(d.ga,a.Oa),c===this.g.ga[this.g.ga.length-1]&&(d.qd=null)):d.ra[c]=a.Oa;"building"!==c&&"poilabel"!==c||!a.Bn||d.pe||(d.pe={},d.pe.tf=a.Bn,g.Lj&&g.Lj.q("vecTileParsed.buildings",{qp:d}));if("roadlabel"!==c&&"poilabel"!==c||this.z5||!g.l.i3&&!this.e.Bd)this.ge||this.gf?this.QB([this.g,f,d,b,c]):(this.ck(), this.Uj.ty(this.g,f,d,b,c));c===e[e.length-1]&&(c="roadlabel"===c||"poilabel"===c?"labels":"allbase",this.ge||this.gf?this.QB([this.g,"tileComplete",d,b,c]):(this.ck(),this.Uj.ty(this.g,"tileComplete",d,b,c)))}},$F:function(){if(this.e){var a=this.e.D.getMapStyle();this.Cq=a;this.Dga(a);this.Kc&&this.Kc.P5()&&(-1!==a.indexOf("amap://styles")&&(a="normal"),a={command:"status",payload:{mapType:a,style:g.l.ba&&!this.g.ja?"6":"5",rd:this.g.ja?2:1}},this.Xx()?(g.Ec.bna(a,g.a.Qs),this.Kc.fFa()||this.Kc.close()): this.Kc.send(a))}},mapStyleChanged:function(){this.$F()},styleChanged:function(){this.$F()},ZD:function(){for(var a in this.tg)this.tg.hasOwnProperty(a)&&this.tg[a].Ib&&(this.Ll(this.tg[a].Ib,this.tg[a].Md),delete this.tg[a]);this.Kc=null;this.xl("mapStyle");this.set("display",1)},aE:function(a){var b=a.reqId;this.tg[b]&&(!a.content.status&&this.tg[b]&&this.Ll(this.tg[b].Ib,this.tg[b].Md),delete this.tg[b])},bE:function(a){var b=a.reqId;if((!/-1$/.test(b)||!this.bC())&&this.tg[b]){var c=a.content.opt, d=this.tg[b].Ib[0];c!==this.fb&&!d.Ie||d.Ie&&2<(this.bC()||Math.abs(c-this.fb))?this.Ll(this.tg[b].Ib,this.tg[b].Md):this.Ts(a.content.data,c)}},G1:function(a,b){if(g.Nj){var c=a.Tg,c={"x-vd-v":c.cf,tv:c.Nh,bgc:this.e.De,vdataVersion:c.lf,url:this.Ky(a.Md,[]),o:this.g,Ae:this.e.D.get("showBuildingBlock")};b?a.Ib.length&&(c.qd=!0,c.data=g.a.map(a.Ib,function(a){return{key:a.key,data:JSON.stringify({key:a.key,qd:a.qd,ga:a.ga,pe:a.pe})}})):this.zV||(c.Mf=!!this.jl,c.Oc=this.jl||this.Di?a.Fu:a.data.Oc); g.Nj.set(c)}},TS:function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!1;if(this.Ci&&"zh_cn"!==this.lang)for(var d=0;d<a.length;d+=1)a[d].status="loaded",a[d].Ba=!0;else{var e=[],f=this;this.bka(a,b,g.a.bind(function(a,d){var f=this;if(d.length){for(var m=0,n=d.length;m<n;m++){var p=d[m].ta,q=p.x,r=p.y,p=p.z;if(10>p){var s=Math.pow(2,p);if(q>=s||0>q)q=(q+s)%s}q=g.a.FI(q,r,p).join(",");g.a.ka(e,q)||e.push(q)}if(this.Xx())if(m=this.Tea({zya:d,Ie:c,Md:b,fr:e}),m.BCa=(new Date).getTime(), this.Ci)g.Jk.xh(m,function(a,c){if(f.e)if(c.O5){var d=c.Ib.map(function(a){return f.oa.get(a.key)}).filter(function(a){return a});f.Ll(d,b)}else f.So?(g.a.Tb(c.Ib,function(a){this.oa.set(a.key,a);a.qd&&!a.qd.loaded&&(g.ik.tm(a.qd),a.qd.loaded=!0);a.pe&&a.pe.tf&&g.Lj&&g.Lj.q("vecTileParsed.buildings",{qp:a})},f),f.set("display"),f.G1(c,!0)):(g.a.Tb(c.Ib,function(a){var b=this.oa.get(a.key);b&&(b.status=a.status,a.L&&a.L.Da&&this.Zga(a.L.Da))},f),c.data&&f.zz(c.data))});else{var u=g.Ec.o6;this.e.D.Ra&& !g.Ec.Poa&&this.e.D.vq||(u=g.Ec.xh);this.$F();u(m,function(a,c){if(f.e){if(c.O5){var d=c.Ib.map(function(a){return f.oa.get(a.key)}).filter(function(a){return a});f.Ll(d,b)}if(u===g.Ec.o6){if(c.disabled){g.Ec.Poa=!0;f.set("display");return}if(c.Lla)return}c.data&&(f.e.De!==c.Cu&&(f.e.De=c.Cu),g.a.Tb(c.Ib,function(a){var b=this.oa.get(a.key);b&&(b.status=a.status)},f),f.G1(c),c.data&&f.zz(c.data))}})}else!this.Ci&&this.Kc&&this.Kc.P5()?this.e.D.get("workerMode")?this.PG(d,b,e,c):(1>this.Kc.za.length|| 3<this.ou?this.PG(d,b,e,c):((2===this.Kc.za.length||this.Kc.CJ())&&this.$F(),this.aha(d,b,e,c)),this.Kc.tHa(this.Kc.za.length+1),this.Kc.d6&&this.Kc.HCa(Math.ceil((new Date-this.Kc.d6)/1E3)),this.Kc.d6=new Date):this.PG(d,b,e,c)}},this));window.renderDelay&&(this.GK=setTimeout(function(){f.YJ&&f.set("display",!1);f.YJ=!1;f.GK=null},window.renderDelay))}},Dga:function(a){a&&"normal"!==a&&0!==a.indexOf("amap://styles/")?this.zV=!0:this.zV=!1},bka:function(a,b,c){var d=g.Nj;if(d&&!this.zV&&18>=b){var e= this,f=this.e,h=f.D;f.MS||void 0!==f.US||("dv"===h.get("baseRender")?f.US=1:f.US=2);d.get({type:h.Ra?"NFS":"FS",Ae:this.g.vv||this.g.Ae,uya:a,Mf:!!this.jl,o:this.g,url:this.Ky(b,[]),timeout:1E3},function(d,h){if(e.g){if(d)return c(null,a);h.E6.length&&c(null,h.E6);if(h.hS.length)if(h.hS.length===a.length&&(f.MS&&f.US--,e.e.D.Ra||e.Ci||e.FD||e.e.bU()),h.Oc){e.cf=h.Tg["x-vd-v"];e.Nh=h.Tg.tv;var m=h.Tg.bgc;e.e.De!==m&&(e.e.De=m);g.a.forEach(h.hS,function(a){a.status="loaded"});e.z7(h.Oc,b)}else h.k6&& (g.a.forEach(h.k6,function(a){var b=e.oa.get(a.key);if(b){b.status="loaded";b.pe=a.pe;if(a.qd){b.qd=a.qd;b.ga=a.ga;var c="limg-"+a.key+"-"+e.g.lc;b.qd.Bk=c;b.ga&&(g.a.forEach(b.ga,function(a){a.Da&&g.a.forEach(a.Da,function(b,d){b&&0===b.indexOf("limg-")&&(a.Da[d]=c)})}),g.ik.tm(b.qd),b.qd.loaded=!0)}b.pe&&b.pe.tf&&g.Lj&&g.Lj.q("vecTileParsed.buildings",{qp:b});b.Ba=b.Ra=!0;e.oa.set(a.key,b)}}),e.set("display"))}})}else c(null,a)},aha:function(a,b,c,d){if(!d||!this.bC()){var e=[(new Date).getTime(), this.Kc.za.length+1&65535,d?1:0].join("-"),f={command:"tiles",reqId:e,payload:{t:c,opt:b,cs:{level:b,flds:this.g.ga.join(","),v:g.Te?"3":"2"}}},h;if(!this.Kc.CJ()){var k=this;setTimeout(function(){k.Kc&&!k.Kc.CJ()&&(k.ou?k.ou++:k.ou=1,k.Kc.qpa(h)&&(delete k.tg[e],k.PG(a,b,c,d)))},300)}h=this.Kc.send(f);this.tg[e]={Ib:a,Md:b}}},lT:function(a){if(!a.Ra||a.Ie)a.status="",a.Ra=void 0,a.Ba=null,a.jd=null,this.oa.xw(a.key)},Tea:function(a){var b=a.zya,c=a.Md,d=a.fr;a=a.Ie;return{lc:+new Date+"_"+Math.random(), Cu:this.e.De,Bd:this.e.Bd,Ci:this.Ci,So:this.So,Ae:this.g.Ae,ysa:!!g.Te,Uf:this.J.type,Mf:this.jl,KS:this.g.lc,ga:this.g.ga,Jc:this.g.ja,Ua:this.g.Ua,VR:Math.ceil(this.pk.Uy),Ib:g.a.filter(b,function(a){return"loaded"!==a.status}),Md:c,fr:d,Ie:a,url:this.Ky(c,d,b),Bh:this.WY(c,[]),LFa:this.e.D.Ra}},WY:function(a,b){return{wS:"3D"===this.J.type,VP:this.g.Ae,Ur:g.r.Ur||null,YCa:this.g.get("businessIconsID"),cf:this.cf,Bd:this.e.Bd,Nh:this.Nh,VEa:this.g.get("iconsID"),LS:this.g.lc,jz:a,Yy:this.g.Yy, Of:!this.g.yn()&&this.g.S.get("merge"),Oc:b,ba:this.g.get("forceBig")||g.l.ba,Uf:this.J.type,mode:this.g.get("mode"),awa:g.r.tc,z8:this.g.get("forceBig")?1:this.g.Ua,Qq:this.g.get("forceBig")?!1:this.g.ja,ey:this.g.get("forceBig")||g.l.ba&&!this.g.ja?1:0}},aB:function(a){a=a.split(";");for(var b=0,c=a.length;b<c;b+=1){a[b]=a[b].split(",");for(var d=0,e=a[b].length;d<e;d+=1)a[b][d]=parseInt(a[b][d],36)}return a},z7:function(a,b){if(a.length){var c=this,d=null;this.jl?(d=g.Ec,d=d.parseDataToWebGL): d=this.Ci?g.Jk.parseLabel:g.Ec.parseDataToVector;var e=c.WY(b,a);e.Te=g.Te;d&&d instanceof Function&&d(e,function(a,b){if(c.g&&!a){var d=b.icons;if(d)for(var e=0;e<d.length;e+=1)g.ik.tm(d[e]);b.data&&c.zz(b.data)}})}},Ts:function(a,b,c){if(this.g){for(var d=[],e=0,f=a.length;e<f;e+=1){var h=a[e];h&&(c&&(h=JSON.parse(h)),h["x-vd-v"]?(this.cf=h["x-vd-v"],this.Nh=h.tv,this.lf=[h.tv,h.vdv].join("-"),h.bgc&&(h="#"+h.bgc.substring(2),this.e.De!==h&&(this.e.De=h))):this.$D(h,b,d))}this.z7(d,b)}},$D:function(a, b,c){function d(d,e,f){e=[f,d,e].join("/");18<b&&!l.jl&&(e+="/"+b);if((d=l.oa.get(e))&&"loaded"!==d.status)if(l.R9(d,p)||d.Ie){if(-1!==n.indexOf(m))if("limg"===m){if(e=a[1],d.qd=e,"string"===typeof e.b&&(e.b=l.aB(e.b)),f="",f="object"===typeof e.u?e.u.url:e.u)d={url:f,Bk:"limg-"+d.key+"-"+l.g.lc},e.u=d,g.ik.tm(d)}else{e={Hg:d.ta,Oi:e,Oa:a,Ed:m,Yy:l.g.Yy,hy:l.e.De,FD:"building"===m,Bi:"poilabel"===m||"roadlabel"===m||"building"===m&&l.g.Ae};if("poilabel"===m||"roadlabel"===m)e.qd=d.qd;m===n[n.length- 1]&&(d.status="loaded");c.push(e)}}else l.FU(b,d,p,g.a.bind(l.lT,l))}var e=a[0].split("-"),f=parseInt(e[1]),h=parseInt(e[2]),k=parseInt(e[0]),l=this,m=e[3],n=this.g.ga,p=18<b?Math.pow(2,b-18):1,e=l.pk.Uy,q=Math.pow(2,k);10>k&&(f<=e&&d(f+q,h,k),f>=q-e&&d(f-q,h,k));d(f,h,k)},QB:function(a){this.uu||(this.uu=[]);this.uu.push(a)},ck:function(){if(this.uu&&this.uu.length){for(var a=0,b=this.uu.length;a<b;a+=1)this.Uj.ty.apply(this.Uj,this.uu[a]);this.uu=[]}},Ll:function(a,b){for(var c=18<b?Math.pow(2, b-18):1,d=0;d<a.length;d+=1){var e=a[d];this.FU(b,e,c,g.a.bind(this.lT,this));18<b&&this.oa.xw(e.key+"/"+b)}g.Nj&&g.Nj.xw({Ib:a,url:this.Ky(b,[]),o:this.g,Mf:!!this.jl,Ae:this.g.Ae})},Ky:function(a,b,c){return this.g.url+b.join(";")+"&lv="+a+"&key="+g.r.key+"&preload="+(c&&c[0]&&c[0].Ie?1:0)},$Ba:function(){var a=this.g.url,b="rb";if(/\\/limg/.test(a)||/flds=[^&]+label/.test(a))b="rl";return b},zCa:function(){},PG:function(a,b,c){function d(a,c){var d=a.split("|");d[0]=c+d[0];var e=d,f="";d[d.length- 1]&&(f=d[d.length-1],e=d.splice(0,d.length-1));k.Ts(e,b,!0);return f}var e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:!1,f=new XMLHttpRequest;f.yE=[(new Date).getTime(),e?1:0].join("-");var e=this.Ky(b,c,a),h=0,k=this;f.Mq="";f.onreadystatechange=function(){if(k.g&&!(2>f.readyState)){var c=4===f.readyState&&0===f.status;b!==k.fb&&c&&!f.Lt?(f.Lt=!0,k.Ll(a,b),f.onreadystatechange="",c||f.abort()):f.Lt||(3===f.readyState?(c=f.responseText.substring(h),f.Mq=d(c,f.Mq),h=f.responseText.length): 4===f.readyState&&(c=f.responseText.substring(h),k.Ci&&(c+="|"),d(c,f.Mq),f.Mq=""))}};f.onerror=function(){};this.Jra||(this.Jra=1);f.open("GET",e,!0);f.send()},R9:function(a,b){var c=this.Fw||this.pk,d=a.ta.x,e=a.ta.y;return d>Math.floor(c.Hc/b)||d<Math.floor(c.Ic/b)||e>Math.floor(c.sc/b)||e<Math.floor(c.fc/b)?!1:!0},FU:function(a,b,c,d){d(b)}};g.M.canvas.Pj=g.M.Ti.extend({ka:[g.Xw],A:function(a,b){arguments.callee.ma.apply(this,arguments);this.lc=g.a.yb(this);this.$n=300;this.ff=a.ff;this.Ci=this.Di=!0;this.X("mapStyle",a.e);this.X("style",a.e);this.So=!0;this.Sx=1;var c=this;this.qZ=function(){c.Q6=!0;c.set("display",0)};this.Yg();this.QS(a)},QS:function(a){a=g.l.ba||a.ja?"big":"small";var b=g.r.tc+"://vdata.amap.com/style_icon/icon-biz-"+a+".png";g.ik.tm(g.r.tc+"://vdata.amap.com/style_icon/icon-normal-"+a+".png");g.ik.tm(b)},bB:function(a){g.ik.xna(a, this);var b=g.M.canvas.Pj.bd.bB;b&&b.apply(this,arguments)},Yg:function(){this.Ym=document.createElement("canvas");this.Ym.className="amap-labels";this.Ym.draggable=!1;this.Ym.K5=!0;this.Qk=this.Ym.getContext("2d",{alpha:!0});this.e6=[];this.As=10},Vv:function(a){var b=Math.pow(2,a.P.zoom-this.ne),c=this.g.ja?this.g.Ua:1,d=a.P.lb.ab(this.Is).ld(this.Gg);this.transform={translate:this.transform.translate.add(d.Nd(c)),scale:b/c,rotate:0};this.lb=a.P.lb},Lz:function(a,b){this.Na=this.J.Na;this.ye=!1; this.currentTime=+new Date;this.AV=b.AV;this.fe=[this.Ha.hc.x,this.Ha.hc.y];this.Il=b.ZH;var c=this.Ig;this.ge=this.zoom<<0!==this.zoom;var d=this.lb.ab(this.Na);d.x<-g.a.Fa/2&&(d.x+=g.a.Fa);d.x>g.a.Fa/2&&(d.x-=g.a.Fa);this.$P=d.ld(this.Gg);for(d=c.length-1;0<=d;d-=1){var e=c[d];if(e.length){var f=e[0].ta.z,h=!1;if(e.vg&&!g.Da.Je&&("stable"==this.Gf||f<=this.zoom&&"zoomIn"===this.Gf||f>=this.zoom&&"zoomOut"===this.Gf)&&(!this.labels||!this.labels.length||this.IJ||a.Fi||!this.qE(this.labels.wk,this.pk)|| this.vJ(a)||this.te!==a.te)){h=!0;h=[];a.te&&(h.push.apply(h,a.te),this.te=a.te);a.nb.length?(h.push.apply(h,a.nb),this.MN=a.nb.fI):this.MN=null;for(var k=e.length-1;0<=k;k-=1){var l=e[k],m=!1,n=l.ga;l.re&&(l.re=!1,this.OI("poilabel",l.ga,void 0,!0),this.Uj.C3(l));!n&&l.ob&&l.ob.ga&&(n=l.ob.ga,m=!0);if(n)for(var p=0,l=n.length;p<l;p+=1){n[p].reverse=m;var q=!1,r=n[p].za;this.MN&&g.a.Tb(this.MN,function(a){!q&&g.wd.Sd(r,a.Qf[0].za)&&(q=!0)});q||h.push(n[p])}}e=[];k={};if(h.length)for(m=0,l=h.length;m< l;m++)h[m].id in k||(k[h[m].id]=1,e.push(h[m]));e.zoom=f;this.aT(e);e.sort(function(a,b){return a.zIndex!==b.zIndex?a.zIndex>b.zIndex?-1:1:!a.Cd^!b.Cd?a.Cd?1:-1:a.Cd==b.Cd?a.id==b.id?a.se==b.se?a.name<b.name?-1:1:a.se>b.se?-1:1:a.id<b.id?-1:1:a.Cd>b.Cd?-1:1});this.labels=e;this.labels.wk=this.pk;this.IJ=!1}}}if(this.cQ(a)){this.zd();if(!this.e.D.Ra)return;this.hU(a);this.rh=this.labels}this.Q6=!1;this.Ne(a)},aT:function(a){this.labels&&this.labels.opacity||(this.labels=[],this.labels.opacity={}); for(var b={},c=0;c<a.length;c+=1){var d=a[c].id;d&&(d in this.labels.opacity?(b[d]=this.labels.opacity[d],delete this.labels.opacity[d]):b[d]=0,a[c].wj=!0)}for(var c=0,e=this.labels.length;c<e;c+=1)d=this.labels[c].id,this.labels.opacity[d]&&(a.push(this.labels[c]),b[d]=this.labels.opacity[d],this.labels[c].wj=!1);a.opacity=b},zd:function(){if(this.vg&&!this.g.Ra){var a=this.g;a.Ra=!0;a.Jd?a.qa("renderComplete"):(a.Jd=!0,a.qa("complete"))}},oc:function(a,b){this.lang=a.lang;this.Cq=a.Cq;this.rp=a.rp; this.fp(a,b);this.ge||this.ck();this.Is&&(a.iL||a.SE&&g.l.Xl||a.gf&&!a.ge&&a.V1)?this.Vv(a,b):this.Lz(a,b);this.Is=this.lb;this.ye&&this.set("display",0);this.JS=this.Gf},Ne:function(a){var b=this.lb.ab(this.Na);b.x<-g.a.Fa/2&&(b.x+=g.a.Fa);b.x>g.a.Fa/2&&(b.x-=g.a.Fa);this.transform={translate:new g.H(a.P.Ha.Ac.x*(this.g.ja?this.g.Ua:1),a.P.Ha.Ac.y*(this.g.ja?this.g.Ua:1)),scale:1/(this.g.ja?this.g.Ua:1),rotate:0}},qE:function(a,b){return a.fc===b.fc&&a.Ic===b.Ic&&a.sc===b.sc&&a.Hc===b.Hc},wn:function(a, b){var c;if(this.zoom){var d=a.ld(Math.pow(2,20-this.zoom));this.labels&&(c=this.Hqa(d,b))&&(c.H5=!1);!c&&this.nb&&(c=this.Gqa(d))&&(c.H5=!0)}return c?[c]:[]},Hqa:function(a,b){for(var c=a.x,d=a.y,e=this.labels.yFa||this.labels,f=e.length-1;0<=f;f-=1){var h=e[f],k=h.za[0]/this.T,l=h.za[1]/this.T;if((h.Vs||!b)&&this.D5(h,c,d,k,l))return h}},Gqa:function(a){var b=a.x;a=a.y;for(var c=this.nb.length-1;0<=c;c-=1){var d=this.nb[c],e=d.za[0]/this.T,f=d.za[1]/this.T;if(d.Vs&&this.D5(d,b,a,e,f))return d}}, D5:function(a,b,c,d,e){for(var f=0;f<a.aa.length;f+=1){var h=a.aa[f][2],k=a.aa[f][3],l=a.aa[f][0],m=a.aa[f][1];this.g.ja&&(h/=this.g.Ua,k/=this.g.Ua,l/=this.g.Ua,m/=this.g.Ua);if(b>=d+l-1&&b<=d+l+h+1&&c>=e+m-1&&c<=e+m+k+1)return!0}return!1},reloadChanged:function(){this.g&&(this.g.Ra=!1);this.oa.count&&(this.oa.clear(),g.Nj&&g.Nj.clear());this.labels=[];this.e6=[];this.Nb&&this.Nb.parentNode&&this.Nb.parentNode.removeChild(this.Nb);this.Ym&&this.Ym.parentNode&&this.Ym.parentNode.removeChild(this.Ym); this.set("display")},uj:function(){return this.Ym},reCalcLabelPos:function(){this.oa&&this.oa.forEach(function(a){a.re=!0})},styleChanged:function(){this.reCalcLabelPos&&this.reCalcLabelPos()},OI:function(a,b,c,d){if(b&&("roadlabel"===a||"poilabel"===a))for(a=0;a<b.length;a+=1){var e=b[a];if((!d||e.lk)&&e.Am){var f="",h="",k="";e.qc&&(k=e.qc[0],f=k[3],h=k[4],k=e.Aj?"":k[7]);if(f=this.J.My&&this.J.My(f,h,k,e.Am,e.Ru,c))if(e.visible=f[4],e.vk=f[3],e.vd=f[0],e.qc)for(h=0;h<e.qc.length;h+=1)k=e.qc[h], k[3]=f[0],k[4]=f[1],e.lk&&(k[7]=f[2],e.tI||(e.tI=k[2]),e.fontSize=f[6]?f[6]:k[2])}}}});g.oM={Ky:function(a,b,c){return this.g.Av+b.join(";")+"&lv="+a+"&key="+g.r.key+"&preload="+(c&&c[0]&&c[0].Ie?1:0)},Ts:function(a,b){if(this.g){for(var c=[],d=[],e=0,f=a.length;e<f;e+=1){var h=a[e];h&&(h=JSON.parse(h),h["x-vd-v"]?(this.cf=h["x-vd-v"],this.lf=[h.tv||"",h.vdv].join("-"),this.Nh=h.tv,this.e.De="#"+h.bgc.substring(2)):(h=this.$D(h,b,c,this.cf||"v4"))&&d.push(h))}this.set("display")}},Fz:function(a,b){var c=0,d=0,e=1,c=256*b.x,d=256*b.y,e=b.T;return[(c+a[0])*e,(d+a[1])*e]},$D:function(a, b,c,d,e){function f(c,f,m){c=[m,c,f].join("/");if(c=q.oa.get(c)){f=c.ta;var n="3D"==q.J.type?0:-3;if(c&&"loaded"!==c.status)if(q.R9(c,u)||c.Ie){if(-1!==s.indexOf(r))if("limg"===r)a[1]&&(c.qd={url:"data:image/png;base64,"+a[1],Bk:"limg-"+c.key+"-"+q.g.lc},g.ik.tm(c.qd));else{if("roadlabel"===r)for(var p=1;p<a.length;p+=1){var w=a[p],A=g.a.ww(w[1],d);if(!(0>A[0]||256<=A[0]||0>A[1]||256<=A[1])){var B=q.Fz(A,f),A={margin:0,z:m,zIndex:9E3,za:B,name:w[0],Aj:!0,Ta:A,Da:[],aa:[],visible:!0,vk:!0};A.id="roadlabel_"+ g.a.yb(A);A.Uq=15>w[2]%90||75<w[2]%90?90*Math.floor((w[2]+15)/90):w[2];B=w[3];0<=w[8]&&(A.kH={name:w[6],M9:w[7],dir:w[8]});var G=B[2],H=B[3],n=-Math.floor(H/2);if(w[4]){A.xv=!0;var I=w[5].split(":"),P=I[1],P=parseInt(P)-1,I=g.r.tc+"://vdata.amap.com/style_icon/icon-normal-"+(k||l?"big":"small")+".png";A.Da.push(I);var I=Math.floor(P/10),L=P%10,M=0,K=0,F=0;l?(M=48,F=K=40):k?(M=K=40,F=36):(M=K=24,F=20);var Q=M*Math.max(G+2,F)/F,I=[-Q/2,-M/2,Q,M,K*L,K*I,K,K];A.se=7;A.aa.push(I)}A.Da.push(c.qd.Bk);A.se= 11;A.aa.push([-Math.floor(G/2),n,G,H,B[0],B[1],B[2],B[3]]);c.ga||(c.ga=[]);c.ga.push(A)}}else if("poilabel"===r){for(var N=[],p=1;p<a.length;p+=1)if(w=a[p],A=g.a.ww(w[1],d),!(0>A[0]||256<=A[0]||0>A[1]||256<=A[1])){B=q.Fz(A,f);A={id:w[4],margin:n,zIndex:9001,za:B,name:w[0].replace("^",""),lk:!0,Ta:A,Da:[],aa:[],visible:!0,vk:!0};A.id||(A.id="poilabel_"+g.a.yb(A));P=0;A.Cd=w[8];w[6]&&(I=w[6].split(":"),P=I[1],H=Math.floor((parseInt(I[0].split("_")[1])-28)/2));if(P&&w[3]){I=g.r.tc+"://vdata.amap.com/style_icon/icon-"+ (1===H?"biz-":"normal-")+(k||l?"big":"small")+".png";A.Da.push(I);P=parseInt(P)-1;I=Math.floor(P/10);L=P%10;l?(M=48,K=40,F=28):k?(M=K=40,F=28):(M=K=24,F=20);Q=M;if(151===P||152===P||153===P)F-=4,G=w[7][0][2],Q=M*Math.max(G+2,F)/F;I=[-Q/2,-M/2,Q,M,K*L,K*I,K,K];A.aa.push(I)}if(w[2]&&w[7])for(G=w[2],I=0;I<w[2].length;I+=1)A.Da.push(c.qd.Bk),B=w[7][I],l&&!e&&(G[I][0]=Math.round(G[I][0]*v),G[I][1]=Math.round(G[I][1]*v),G[I][2]=Math.round(G[I][2]*v),G[I][3]=Math.round(G[I][3]*v)),L=G[I][0],M=G[I][1]-(l? 4:2),K=B[3],F=B[2],L<-F&&P&&w[3]&&(L=-F+A.aa[0][0]),L-=2,A.se=K-4,4===m&&"\\u5317\\u4eac"===A.name&&(M=l?-50:-26),A.aa.push([L,M,F,B[3],B[0],B[1],B[2],B[3]]);A.Es=w[5];A.Es&&N.push(A.Es);A.Vs=w[4];A.Ii=w[9];A.z6=w[10];A.eg=P;A.nv=H;c.ga||(c.ga=[]);c.ga.push(A)}c.pe||(c.pe={},c.pe.tf=N,g.Lj&&g.Lj.q("vecTileParsed.buildings",{qp:c}))}r===s[s.length-1]&&(c.status="loaded",h=c,c.Ra=c.Ba=!0)}}else q.FU(b,c,u,g.a.bind(q.lT,q))}}var h=null,k=g.l.ba,l=this.g.ja,m=a[0].split("-");1===m.length&&(m=a[0].split("_")); c=parseInt(m[1]);var n=parseInt(m[2]),p=parseInt(m[0]),q=this,r=m[3],s=this.g.ga,u=18<b?Math.pow(2,b-18):1,m=Math.ceil(q.pk.Uy),v=this.g.ja?this.g.Ua:1,w=Math.pow(2,p);10>p&&(c<=m&&f(c+w,n,p),c>=w-m&&f(c-w,n,p));f(c,n,p);return h}};g.M.canvas.nM=g.M.canvas.Pj.extend({ka:[g.oM]});g.M.canvas.Pj.Hb({hU:function(a){this.Sx++;var b=this.Ym,c=this.Qk;this.Ty={};var d=this.g.ja?this.g.Ua:1;this.kh=d;var e;0!==a.P.rotation?(e=2*Math.floor(a.P.Ha.Ac.x)*d,d*=2*Math.floor(a.P.Ha.Ac.y)):(e=a.size.width*d,d*=a.size.height);g.f.xm(b,e,d,!0);g.l.sna&&b.parentNode&&b.parentNode.appendChild(b);c.textBaseline="bottom";this.fk=0;this.labels&&this.GT(this.labels);this.labels&&this.Iwa(this.labels,c,g.Mj.Qqa(this.e.D),this.gd,e,d);this.b6=[];this.labels&&(this.labels.mp=this.zoom,this.labels.lp= this.lb,this.labels.Pq=this.rotation,this.labels.JK=this.g.ja,this.labels.size=a.size);a.nb&&(this.nb=a.nb);this.nb&&(this.nb.mp=this.zoom,this.nb.lp=this.lb,this.nb.Pq=this.rotation,this.nb.size=a.size);this.q("afterLabelRender")},Hwa:function(a,b,c){var d=void 0===b.vk?!0:b.vk,e=1,f=void 0===b.visible?!0:b.visible,h=null,k=this.e.J.ae;if(b.Am&&k){var l=k=h="";b.qc&&b.qc.length&&this.HQ&&(l=b.qc[0],h=l[3],k=l[4],l=b.Aj?"":l[7]);if(h=this.J.My&&this.J.My(h,k,l,b.Am,b.Ru))f=h[4],d=h[3],e=h[5]}if(f){if(this.Qk.globalAlpha!== c||e)this.Qk.globalAlpha=c||e;f=0;for(k=b.Da.length;f<k;f+=1)(d||"CANVAS"===b.Da[f].tagName)&&this.cpa(a,b.Da[f],b.aa[f],b.Uq,c||e);this.Qk.globalAlpha!==c&&(this.Qk.globalAlpha=c);b.qc&&this.HQ&&(b.pj?this.epa(a,b,h):b.qc.length&&this.HQ(a,b,h))}},cpa:function(a,b,c,d){var e=this.Qk;b=this.Lo(b);if(!b)return 1;var f=c[2],h=c[3],k=c[0],l=c[1];d=(d||0)%360*-Math.PI/180;if(0!==d){var m=Math.cos(d),n=Math.sin(d),p=a[0],q=a[1];e.transform(m,n,-n,m,(1-m)*p+n*q,(1-m)*q-n*p)}k=a[0]+k;a=a[1]+l;4===c.length? b.loaded&&e.drawImage(b,k,a,f,h):e.drawImage(b,c[4],c[5],c[6],c[7],k,a,f,h);0!==d&&e.setTransform(1,0,0,1,0,0)},Lo:function(a){if(!a)return null;if("IMG"===a.tagName||"CANVAS"===a.tagName||(a=g.ik.P3(a))&&a.loaded)return a},kJ:function(a,b){var c=a[0];b&&(c>g.a.Fa/2?c-=g.a.Fa:c<-g.a.Fa/2&&(c+=g.a.Fa));return this.Ju(c,a[1])},Ju:function(a,b){var c=this.g.ja?this.g.Ua:1,d=this.T,e=0,f=0,e=(a-this.fe[0])/d,f=(b-this.fe[1])/d;return[Math.round(e*c),Math.round(f*c)]},d4:function(a,b){var c=a[0];b&&(c> g.a.Fa/2?c-=g.a.Fa:c<g.a.Fa/2&&(c+=g.a.Fa));return[c/this.T,a[1]/this.T]},Zsa:function(a,b){var c=a.za;return c[0]>b.Vd.x||c[1]>b.Vd.y||c[0]<b.hc.x||c[1]<b.hc.y?!1:!0},qEa:function(a){var b=this.b6;if(this.b6.zoom!==this.labels.zoom)for(var c=0,d=b.length;c<d;c+=1){var e=b[c];e.lk&&this.Zsa(e,a.P.Ha)&&(this.e6.push(e),e.zoom=b.zoom,e.UEa=new Date)}},rq:function(a,b){var c=this.d4(a.za,a.reverse);if(a.lk)return this.l5(c,a,b);if(a.Aj){var d=!1,e=a.za;if(a.pj){var f=Math.pow(2,20-this.zoom),h=20*f, c=[],k=[],l=[],m=!0;for(g.gw.font=a.br+"px "+a.font;m;){for(var n=[],p=[],q=!0,r=0;r<a.name.length;r+=1){var s=g.gw.measureText(a.name[r]).width/this.kh*f,u=g.di.DP(e,s/2+h),h=h+s;if(!u){m=q=!1;break}if(s=this.nS(this.d4(u),5,b))p.push(s),n.push(u);else{q=!1;break}}h+=256*f;q&&(k.push.apply(k,n),c.push.apply(c,p))}if(k.length){d=!0;for(r=0;r<k.length;r+=1)f=k[r][2],f=(new g.H(e[f+1][0]-e[f][0],e[f+1][1]-e[f][1])).direction(),l.push(360-f);a.NS=k;a.eta=l}return d?c:!1}return a.hm?this.l5(c,a,b):this.zoom< a.z?!1:!0}},GT:function(a){function b(b){a.opacity[b]<1-e?(a.opacity[b]+=e,d.ye=1,d.fk=1):a.opacity[b]=1}function c(b){a.opacity[b]>e?(a.opacity[b]-=e,d.ye=1,d.fk=1):a.opacity[b]=0}var d=this,e=0.34;if(!a.oF||"stable"==this.Gf&&"stable"!=this.JS){for(var f=0,h=a.length;f<h;f+=1){var k=a[f],e=k.hm||g.l.ba?1:0.34,l=k.id;if(k.wj){var m=this.rq(k);m?(this.op(m),k.Wg=!0,b(l)):(k.Wg=!1,c(l))}else l in a.opacity&&(a.opacity[l]>e?(a.opacity[l]-=e,this.fk=this.ye=1):delete a.opacity[l])}a.oF=!0}else if("zoomIn"== this.Gf){f=0;for(h=a.length;f<h;f+=1)k=a[f],e=k.hm||g.l.ba?1:0.34,l=k.id,k.wj?k.Wg&&(m=this.rq(k,!0),this.op(m),b(l)):l in a.opacity&&(a.opacity[l]>e?(a.opacity[l]-=e,this.fk=this.ye=1):delete a.opacity[l]);f=0;for(h=a.length;f<h;f+=1)k=a[f],e=k.hm||g.l.ba?1:0.34,l=k.id,k.wj&&!k.Wg&&((m=this.rq(k))?(this.op(m),k.Wg=!0,b(l)):(k.Wg=!1,c(l)))}else if("zoomOut"==this.Gf||a.zoom>this.zoom)for(f=0,h=a.length;f<h;f+=1)k=a[f],e=k.hm||g.l.ba?1:0.34,l=k.id,k.wj?k.Wg?(m=this.rq(k))?(this.op(m),k.Wg=!0,b(l)): (k.Wg=!1,c(l)):c(l):l in a.opacity&&(a.opacity[l]>e?(a.opacity[l]-=e,this.fk=this.ye=1):delete a.opacity[l]);else for(f=0,h=a.length;f<h;f+=1)k=a[f],e=k.hm||g.l.ba?1:0.34,l=k.id,k.wj?k.Wg?b(l):c(l):l in a.opacity&&(a.opacity[l]>e?(a.opacity[l]-=e,this.fk=this.ye=1):delete a.opacity[l]);return!1},Iwa:function(a,b,c,d,e,f){d=!1;18===a.zoom&&18<this.zoom&&(d=!1);b.globalAlpha=1;b=0;for(var h=a.length;b<h;b+=1){var k=a[b];if(!(d&&k.Aj||k.Cp&&c&&0<=c.indexOf(k.Cp))){var l=this.kJ(k.za,k.reverse);-256> l[0]||l[0]>e+256||-256>l[1]||l[1]>f+256||a.opacity[k.id]&&this.Hwa(l,k,a.opacity[k.id])}}},vJ:function(a){if(a.nb&&a.nb.length)if(this.nb&&this.nb.length){if(this.nb!==a.nb||this.nb.mp!==this.zoom||this.nb.lp!==this.lb||this.nb.Pq!==this.rotation||!this.nb.size.gb(a.size))return!0}else return!0;else if(this.nb&&this.nb.length)return!0},cQ:function(a){this.rh&&this.rh.JK!==this.g.ja&&this.g.set("reload");return this.fk||this.vJ(a)||this.labels&&(this.e.gR||this.labels!==this.rh||!this.rh||this.rh.mp!== this.zoom||this.rh.lp!==this.lb||a.Fi||this.rh.Pq!==this.rotation||this.rh.JK!==this.g.ja||!this.rh.size.gb(a.size))?!0:!1},l5:function(a,b,c){var d,e=b.aa.length,f=[];if(b.Ii>this.zoom)d=!0;else for(var h=0;h<e;h+=1){var k=b.aa[h];if(!k[8]){var l=k[2],m=k[3],n=k[0],k=k[1];this.g.ja&&(l/=2,m/=2,n/=2,k/=2);var p=b.margin,n=n-p,k=k-p,l=l+2*p,m=m+2*p,n=a[0]+n,k=a[1]+k,l=Math.ceil((n+l)/this.As),m=Math.ceil((k+m)/this.As),n=Math.floor(n/this.As),k=Math.floor(k/this.As);(m=c?[n,l,k,m]:this.m5(n,k,l,m))? f.push(m):d=!0}}return d?!1:f},nS:function(a,b,c){var d=a[0]-b/2;a=a[1]-b/2;var e=Math.ceil((d+b)/this.As);b=Math.ceil((a+b)/this.As);d=Math.floor(d/this.As);a=Math.floor(a/this.As);return c?[d,e,a,b]:this.m5(d,a,e,b)},op:function(a){for(var b=0;b<a.length;b+=1)for(var c=a[b][0],d=a[b][2],e=a[b][3],f=0,h=a[b][1]-c;f<=h;f+=1)for(var k=0,l=e-d;k<=l;k+=1)this.Ty[c+f]||(this.Ty[c+f]={}),this.Ty[c+f][d+k]=1},m5:function(a,b,c,d){for(var e=0,f=c-a;e<=f;e+=1)if(this.Ty[a+e])for(var h=0,k=d-b;h<=k;h+=1){if(1=== this.Ty[a+e][b+h])return!1}else this.Ty[a+e]={};return[a,c,b,d]}});g.M.canvas.Pj.waa=g.da.extend({A:function(a){this.M=a},Zka:function(a){this.Cq=a;return this.dP([0,0,0])?!0:this.Cq=!1},JZ:function(){return this.M.ge?!1:!0},Wfa:function(a){if(a){var b=Array.prototype.slice.call(arguments,0);switch(a.type){case "icon":return this.Zfa.apply(this,b);case "label":return this.$fa.apply(this,b);default:console.error("Unknown type",a)}}},SY:function(a,b,c){a=null;try{a=b.getImageData.apply(b,c)}catch(d){console.error(d),a=null}return a},ula:function(a){return 0>a?0:255< a?255:Math.round(a)},u1:function(a,b){for(var c=0;4>c;c++)a[b+c]=this.ula(a[b+c]);return a},cP:function(a,b){var c=259*(b+255)/(255*(259-b));return[c*(a[0]-128)+128,c*(a[1]-128)+128,c*(a[2]-128)+128]},Pka:function(a){return[255-a[0],255-a[1],255-a[2]]},dP:function(a,b){isNaN(b)&&(b=20);var c=Math.max(0,0.299*a[0]+0.587*a[1]+0.114*a[2]-b);switch(this.Cq){case "amap://styles/normal":case "normal":return[1*c,1.2*c,255];case "amap://styles/light":case "light":return[1*c,1*c,255];case "amap://styles/fresh":case "fresh":return[1* c,1*c,220];case "amap://styles/grey":case "amap://styles/dark":case "insight":case "dark":return[1.5*a[0],1.5*a[1],1*a[2]];case "amap://styles/blue":case "amap://styles/darkblue":case "blue_night":case "mapv":return[2*a[0],1.5*a[1],1*a[2]]}return!1},aga:function(a,b){var c=20,d=10;switch(b.Po){case "active":c+=20,d+=20}return this.cP(this.dP(a,c),d)},oZ:function(a,b){var c=-110;switch(b.Po){case "active":c+=30}return this.cP(this.dP(this.Pka(a),c),50)},Yfa:function(a){return this.cP(a,20)},nZ:function(a, b,c,d,e,f){var h=a[b],k=a[b+1],l=a[b+2];a=a[b+3];0<a?(e=e.call(this,[h,k,l,a],f),c[d]=e[0],c[d+1]=e[1],c[d+2]=e[2]):(c[d]=h,c[d+1]=k,c[d+2]=l);c[d+3]=a;this.u1(c,d)},ifa:function(a){var b=a.data,c=a.width;a=a.height;for(var d=0,e=0,f=[Infinity,Infinity],h=[-Infinity,-Infinity],k=0;k<c;k++)for(var l=0;l<a;l++){var m=4*this.BN(k,l,c,a);if(!(76.5>b[m+3])){e++;k<f[0]&&(f[0]=k);l<f[1]&&(f[1]=l);k>h[0]&&(h[0]=k);l>h[1]&&(h[1]=l);for(var n=!0,p=0;4>p;p++)if(220>b[m+p]){n=!1;break}n&&d++}}return{Xza:0<e? d/e:0,Pna:[f[0],f[1],h[0]-f[0]+1,h[1]-f[1]+1]}},BN:function(a,b,c){return b*c+a},wH:function(a,b,c,d,e,f,h){var k=this.BN(b,c,d,e);d=a[4*k+0];e=a[4*k+1];var l=a[4*k+2];a=a[4*k+3];if(a/255<h.C6||h.H9&&!h.H9.call(this,d,e,l,a))return!1;f.push([b,c]);return!0},Pja:function(a,b){var c=Math.abs(a[0]-b[0]),d=Math.abs(a[1]-b[1]);return Math.sqrt(c*c+d*d)},Lx:function(a,b){return 0.1>Math.abs(a[0]-b[0])&&0.1>Math.abs(a[1]-b[1])},jla:function(a,b){for(var c=[a[0]],d=1,e=a.length;d<e;d++){var f=a[d];this.Pja(f, c[c.length-1])<=b&&c.push(f)}return this.Lx(c[c.length-1],a[a.length-1])?c:null},uCa:function(){},jda:function(a,b,c,d){d=g.extend({C6:0.2,x6:4},d);var e,f,h=[],k=[],l=[],m=[];for(e=0;e<c;e++){for(f=0;f<b&&!this.wH(a,f,e,b,c,h,d);f++);for(f=b-1;0<=f&&!this.wH(a,f,e,b,c,k,d);f--);}if(!h.length||!k.length)return null;for(f=0;f<b;f++){var n;e=h[0][0];n=k[0][0];if(f>=e&&f<=n)for(e=0;e<c&&!this.wH(a,f,e,b,c,l,d);e++);e=h[h.length-1][0];n=k[k.length-1][0];if(f>=e&&f<=n)for(e=c-1;0<=e&&!this.wH(a,f,e,b, c,m,d);e--);}if(!l.length||!m.length)return null;m.reverse();h.reverse();if(this.Lx(l[l.length-1],k[0])&&this.Lx(k[k.length-1],m[0])&&this.Lx(m[m.length-1],h[0])&&this.Lx(h[h.length-1],l[0])){b=[m,h,l,k];e=0;for(a=b.length;e<a;e++)if(!(2>b[e].length||(b[e]=this.jla(b[e],d.x6),b[e])))return null;return[].concat(b[0]).concat(b[1].slice(1)).concat(b[2].slice(1)).concat(b[3].slice(1))}return null},Mea:function(a){for(var b=[Infinity,Infinity],c=[-Infinity,-Infinity],d=0,e=a.length;d<e;d++){var f=a[d][0], h=a[d][1];b[0]>f&&(b[0]=f);b[1]>h&&(b[1]=h);c[0]<f&&(c[0]=f);c[1]<h&&(c[1]=h)}return b.concat([c[0]-b[0]+1,c[1]-b[1]+1])},dZ:function(a,b){this.l1||(this.l1=document.createElement("canvas"));var c=this.l1;c.width=a;c.height=b;return c},rfa:function(a){switch(a.length){case 2:return"lineTo";case 4:return"quadraticCurveTo"}return null},tY:function(a){switch(a.length){case 2:return[a[0]+0.5,a[1]+0.5];case 4:return[a[0]+0.5,a[1]+0.5,a[2]+0.5,a[3]+0.5]}return a},zX:function(a,b){a.beginPath();for(var c= 0,d=b.length;c<d;c++){var e=b[c];0===c?(2<e.length&&(4===e.length?e=e.slice(-2):console.error("Unknown start point: ",b)),a.moveTo.apply(a,this.tY(e))):a[this.rfa(e)].apply(a,this.tY(e))}},Uea:function(a){a=this.oZ([255,255,255],{Po:a.Po});this.u1(a,0);return"rgba("+a.slice(0,3).join(",")+", 0.8)"},Xfa:function(a,b,c){function d(a){return[Math.round((a[0]-n)*q+n-m[0]),Math.round((a[1]-p)*r+p-m[1])]}c=g.extend({Po:"hover",Pr:!0,padding:[1.5,1.5]},c);var e=a.width,f=a.height,h=this.dZ(2*e+10,f),k=h.getContext("2d"), l=this.Mea(b),m=c.padding;g.l.Jc&&(m[0]+=2.5,m[1]+=2.5);for(var n=l[0],p=l[1],q=(l[2]+2*m[0])/l[2],r=(l[3]+2*m[1])/l[3],l=0,s=b.length;l<s;l++)switch(b[l].length){case 2:b[l]=d(b[l]);break;case 4:b[l]=d(b[l]).concat(d(b[l].slice(2)));break;default:console.error("Unknown point: ",b[l])}k.save();this.zX(k,b);k.closePath();k.fillStyle=c.fillStyle||"rgba(255,255,255,0.85)";k.fill();k.putImageData(a,e+6,0);k.drawImage(h,e+6,0,e,f,0,0,e,f);a=c.Pr&&10<b.length;var u=c.strokeStyle||this.Uea(c);k.strokeStyle= a?"#fff":u;k.lineCap="butt";k.lineJoin="round";k.lineWidth=g.l.Jc?2:1.2;k.stroke();k.restore();return{Ba:h,oi:[0,0,e,f],zd:a?function(a,c){this.lla(a,c,b,u)}:null}},lla:function(a,b,c,d){this.nda();var e=this.M.Sx;this.pX(a,c,{duration:200,AT:0,startTime:Date.now(),sxa:function(a){a.strokeStyle=d;a.lineCap="butt";a.lineJoin="round";a.lineWidth=g.l.Jc?2:1;a.translate(b[0],b[1])},Yza:function(){return this.M.Sx!==e}})},nda:function(){this.BM&&g.a.ri(this.BM)},pX:function(a,b,c,d){this.JZ()?this.BM= g.a.Wc(function(){this.BM=null;if(c.Yza.call(this))d&&d.call(this);else{var e=(Date.now()-c.startTime)/c.duration;1<e&&(e=1);var f=Math.round(b.length*e);if(c.AT<f){var h=1===e?b:b.slice(c.AT,f+1);h.length&&(a.save(),c.sxa.call(this,a,e),this.zX(a,h),a.stroke(),a.restore());c.AT=f}1>e?this.pX(a,b,c,d):d&&d.call(this)}},this):d&&d.call(this)},zda:function(a,b,c){a=a.createImageData(b.width,b.height);var d=a.data,e=a.width,f=a.height,h=c[0]+c[2],k=c[1],l=c[1]+c[3];for(c=c[0];c<h;c++)for(var m=k;m<l;m++)for(var n= 4*this.BN(c,m,e,f),p=0;4>p;p++)d[n+p]=b.data[n+p];return a},Tga:function(a,b,c){var d=a[1]+(b[1]-a[1])*c;return[Math.round(a[0]+(b[0]-a[0])*c),Math.round(d)]},uga:function(a,b,c){for(var d=1/c,e=[],f=1;f<c;f++){var h=this.Tga(a,b,d*f);e.length&&this.Lx(h,e[e.length-1])||e.push(h)}return e},vga:function(a,b){for(var c=1,d=a.length;c<d;c++){var e=a[c-1],f=a[c];2===f.length&&(4===e.length&&(e=e.slice(2)),2===e.length&&(e=this.uga(e,f,b),a.splice.apply(a,[c,0].concat(e)),c+=e.length,d+=e.length))}},vfa:function(a, b,c,d,e){e=Math.round(Math.min(c,d)*e);c--;d--;e?a=[[a+c,b+d-e],[a+c,b+d,a+c-e,b+d],[a+e,b+d],[a,b+d,a,b+d-e],[a,b+e],[a,b,a+e,b],[a+c-e,b],[a+c,b,a+c,b+e],[a+c,b+d-e]]:(e=[a+c,b+d],a=[e,[a,b+d],[a,b],[a+c,b],e]);this.vga(a,5);return a},Zfa:function(a,b,c,d,e,f){b=a.oi;var h=c?c.qS:this.SY(d,e,b);if(h){var k=c?c.Z4:null,l=h,m=a.padding,n=m?m[0]:0,p=m?m[1]:0;(m=0<n*p)&&(l=this.zda(e,l,[n,p,l.width-2*n,l.height-2*p]));d=l.data;b=l.width;var q=l.height;if(b&&q){c=(c=this.M.e)&&c.D?c.D.get("hotspotOptions"): {};c=g.extend({borderAnimation:!0},c);l=this.ifa(l);a=!a.Jsa&&0.46<=l.Xza;var r=e.createImageData(b,q);e=r.data;for(var s=a?this.oZ:this.Yfa,u=0,v=d.length;u<v;u+=4)this.nZ(d,u,e,u,s,{Po:f});if(m&&(e=a&&!g.l.Jc?this.jda(d,b,q,{H9:a?function(a,b,c){return!(220<a&&220<b&&220<c)}:null,C6:0.2,x6:4}):null,e||(e=l.Pna,e=this.vfa(e[0],e[1],e[2],e[3],0.2)),e)){var w=this.Xfa(r,e,{Po:f,fillStyle:"active"!==f?null:"#ddd",dK:h,Pr:c.borderAnimation&&"hover"===f&&!k,padding:a?[1.5,1.5]:[2.5,2.5]}),r=null;return{dK:h, Kz:function(a,b){k&&h&&a.putImageData(h,b[0],b[1]);a.drawImage(w.Ba,w.oi[0],w.oi[1],w.oi[2],w.oi[3],b[0],b[1],b[2],b[3]);w.zd&&(w.zd.call(this,a,b),w.zd=null)}}}return{dK:h,Kz:function(a,b){if(m){var c=this.dZ(r.width,r.height);c.getContext("2d").putImageData(r,0,0);a.clearRect(b[0]+n,b[1]+p,b[2]-2*n,b[3]-2*p);a.drawImage(c,0,0,c.width,c.height,b[0],b[1],b[2],b[3])}else a.putImageData(r,b[0],b[1]);r=null}}}}},$fa:function(a,b,c,d,e,f){a=a.oi;if(c=c?c.qS:this.SY(d,e,a))if(d=c.data,a=c.width,b=c.height, a&&b){var h=e.createImageData(a,b);e=h.data;a=0;for(b=d.length;a<b;a+=4)this.nZ(d,a,e,a,this.aga,{Po:f});return{dK:c,Kz:function(a,b){a.putImageData(h,b[0],b[1]);h=null}}}},fZ:function(a,b,c){var d=c[2],e=c[3],f=a[0]+c[0];a=a[1]+c[1];if(4===c.length||c.DZ){if((b=this.M.Lo(b))&&b.loaded)return c=[4,4],g.l.Jc&&(c[0]*=2,c[1]*=2),{type:"icon",Jsa:b.src&&b.src.indexOf&&0<=b.src.indexOf("/indoor_icon/"),padding:c,oi:[f-c[0],a-c[1],d+2*c[0],e+2*c[1]]}}else return{type:"label",oi:[f,a,d,e]}}}); g.M.canvas.Pj.Hb({QY:function(){this.JN||(this.JN=new g.M.canvas.Pj.waa(this));return!1===this.JN.Zka(this.Cq)?null:this.JN},Tt:function(a,b){var c=this.QY();if(c&&c.JZ()&&a&&a.Da&&a.aa&&0===this.rotation){var d=this.Sx,e=this.kJ(a.za),f=[],h;a.Fr||(a.Fr=[]);var k=a.Fr;for(h=a.aa.length-1;0<=h;h--){if(k[h]){if(k[h].rev!==d)continue;if(k[h].Z4===b)continue}var l=c.fZ(e,a.Da[h],a.aa[h]);if(l){var m=c.Wfa(l,a,k[h],this.Ym,this.Qk,b);m&&(k[h]={Z4:b,rev:d,qS:m.dK},f.push({Kz:m.Kz,oi:l.oi,nE:"icon"===l.type? 2:1}))}}f.sort(function(a,b){return a.nE-b.nE});h=0;for(d=f.length;h<d;h++)f[h].Kz.call(c,this.Qk,f[h].oi),f[h].Kz=null}},VA:function(a){a.Fr&&(a.Fr.length=0,a.Fr=null)},yH:function(){var a=this.Qk;a&&a.putImageData&&a.putImageData(a.getImageData(0,0,1,1),0,0)},DH:function(a){if(a&&a.Da&&a.aa&&a.Fr){var b=this.Qk,c=this.QY();if(c){for(var d=this.Sx,e=this.kJ(a.za),f=a.Fr,h=0,k=a.aa.length;h<k;h++){var l=f[h];if(l&&(f[h]=null,d===l.rev)){var m=c.fZ(e,a.Da[h],a.aa[h]);m&&m.oi&&b.putImageData(l.qS,m.oi[0], m.oi[1])}}a.Fr=null;this.Sx++}}}});g.Mw={h:function(a,b,c,d,e){if(this.ve(a,b,c||this))return this;var f=this.mf=this.mf||{};f[a]=f[a]||[];e?f[a].unshift({xb:b,bf:c||this,Cj:d}):f[a].push({xb:b,bf:c||this,Cj:d});"complete"===a&&this.Ra&&this.q(a);return this},ve:function(a,b,c){var d=this.mf;if(b&&c){if(d&&a in d&&d[a])for(var e=0;e<d[a].length;e+=1)if(d[a][e].xb===b&&d[a][e].bf===c)return!0;return!1}return d&&a in d&&d[a]&&0<d[a].length},G:function(a,b,c){if(!this.ve(a))return this;var d=this.mf;if(d&&d[a])for(var e=0;e<d[a].length;e+= 1)if(!(d[a][e].xb!==b&&"mv"!==b||c&&d[a][e].bf!==c)){d[a].splice(e,1);d[a].length||(d[a]=null);break}return this},bK:function(a,b){if(!this.ve(a))return this;var c=this.mf;if(c&&c[a])for(var d=0;d<c[a].length;d+=1)if(!b||c[a][d].bf===b){c[a].splice(d,1);c[a].length||(c[a]=null);break}return this},q:function(a,b){function c(a){var b=Array.prototype.slice.call(arguments,1),c,d,e,f;d=0;for(e=b.length;d<e;d+=1)for(c in f=b[d]||{},f)Object.prototype.hasOwnProperty.call(f,c)&&(a[c]=f[c]);return a}if(!this.ve(a))return this; var d={type:a};b||"string"!==typeof b&&"number"!==typeof b&&"boolean"!==typeof b?("object"===typeof HTMLElement?b instanceof HTMLElement:b&&"object"===typeof b&&1===b.nodeType&&"string"===typeof b.nodeName)?d.value=b:d=c(d,b):d.value=b;for(var e=[].concat(this.mf[a]),f=0;f<e.length;f+=1)e[f].xb&&(e[f].xb.call(e[f].bf||this,d),e[f]&&e[f].Cj&&this.mf[a]&&this.mf[a].splice(f,1));return this},ti:function(a){a?this.mf&&this.mf[a]&&(this.mf[a]=null):this.mf=null;return this}};(function(){if(!g.Jk){g.Jk=g.GL();var a=g.a.mD({Fz:"posToCoord",aB:"_decodeBoundsList"});g.Jk.wf(null,new Function("\\n    return {\\n      "+a.posToCoord+": "+g.oM.Fz.toString()+",\\n      "+a._decodeBoundsList+": "+g.Xw.aB.toString()+"\\n  }"));g.Jk.wf(null,function(){return{yb:function(){var a=0;return function(c){c._amap_label_id_||(a+=1,c._amap_label_id_=a);return c._amap_label_id_}}(),Ts:function(a,c){a.Bh.Te||(a.Bh.Te=this.Te);a.So?this.Iua.call(this,a,c):this.Jua.call(this,a,c)},Jua:function(a, c){for(var d=a.dF,e=a.Cn,f=[],h=0,k=d.length;h<k;h+=1){var l=d[h];l&&(a.xS&&(l=JSON.parse(l)),l["x-vd-v"]?(this.cf=a.Bh.cf=l["x-vd-v"],this.lf=a.Bh.lf=[l.tv||"",l.vdv].join("-"),this.Nh=a.Bh.Nh=l.tv):this.Hua(this.extend({},a,{PC:l,Oc:f})))}f.length?this.parseLabel(this.extend({},a.Bh,{Oc:f}),function(d,f){var h=f.data,k=f.Vra;c(d,{lc:a.lc,Ib:a.Ib.filter(function(a){return"loaded"===a.status}),data:h,Vra:k,Cn:e,Tg:{cf:a.Bh.cf,lf:a.Bh.lf,Nh:a.Bh.Nh,Md:a.Md}},{Gq:!e,cl:e})}):c(null,{lc:a.lc,data:null, Cn:e},{Gq:!e,cl:e})},Hua:function(a){function c(a,b,c){var n=[c,a,b].join("/");18<h&&!m&&(n+="/"+h);if((a=d.filter(function(a){return a.key===n})[0])&&"loaded"!==a.status&&-1!==l.indexOf(v))if("limg"===v)b=f[1],a.qd=b,"string"===typeof b.b&&(b.b=u.aB(b.b)),c="",(c="object"===typeof b.u?b.u.url:b.u)&&(b.u={url:c,Bk:"limg-"+a.key+"-"+e});else{b={Hg:a.ta,Oi:n,Oa:f,Ed:v,FD:"building"===v,Bi:"poilabel"===v||"roadlabel"===v||"building"===v&&p};if("poilabel"===v||"roadlabel"===v)b.qd=a.qd;v===l[l.length- 1]&&(a.status="loaded");k.push(b)}}var d=a.Ib,e=a.KS,f=a.PC,h=a.Md,k=a.Oc,l=a.ga,m=a.Mf,n=a.VR,p=a.Ae,q=f[0].split("-");a=parseInt(q[1]);var r=parseInt(q[2]),s=parseInt(q[0]),u=this,v=q[3],q=Math.pow(2,s);10>s&&(a<=n&&c(a+q,r,s),a>=q-n&&c(a-q,r,s));c(a,r,s)},Iua:function(a,c){for(var d=a.dF,e=a.Cn,f=[],h=0,k=d.length;h<k;h+=1){var l=d[h];l&&(a.xS&&(l=JSON.parse(l)),l["x-vd-v"]?(this.cf=a.Bh.cf=l["x-vd-v"],this.lf=a.Bh.lf=[l.tv||"",l.vdv].join("-"),this.Nh=a.Bh.Nh=l.tv):this.Gua(this.extend({},a,{PC:l, Oc:f,cf:this.cf||"v4"})))}d=a.Ib.filter(function(a){return"loaded"===a.status});if(d.length)for(f=a.Ib.length-1;0<=f;f--)"loaded"===a.Ib[f].status&&a.Ib.splice(f,1);c(null,{lc:a.lc,rDa:[],Ib:d,Cn:e,Tg:{cf:a.Bh.cf,lf:a.Bh.lf,Nh:a.Bh.Nh,Md:a.Md}},{Gq:!e,cl:e})},Gua:function(a){function c(a,b,c,f){var l=[f,b,c].join("/");if(a=a.filter(function(a){return a.key===l})[0])if(b=a.ta,a&&"loaded"!==a.status&&-1!==k.indexOf(x))if("limg"===x)p[1]&&(a.qd={url:"data:image/png;base64,"+p[1],Bk:"limg-"+a.key+"-"+ n});else{if("roadlabel"===x)for(c=1;c<p.length;c+=1){var m=p[c],v=d.ww(m[1],q);if(!(0>v[0]||256<=v[0]||0>v[1]||256<=v[1])){var u=t.Fz(v,b),v={margin:0,z:f,zIndex:9E3,za:u,name:m[0],Aj:!0,Ta:v,Da:[],aa:[],visible:!0,vk:!0};v.id="roadlabel_"+d.yb(v);v.Uq=15>m[2]%90||75<m[2]%90?90*Math.floor((m[2]+15)/90):m[2];u=m[3];0<=m[8]&&(v.kH={name:m[6],M9:m[7],dir:m[8]});var w=u[2],L=u[3],M=-Math.floor(L/2);if(m[4]){v.xv=!0;var K=m[5].split(":"),F=K[1],F=parseInt(F)-1,K=r.tc+"://vdata.amap.com/style_icon/icon-normal-"+ (s||h?"big":"small")+".png";v.Da.push(K);var K=Math.floor(F/10),Q=F%10,N=0,J=0,O=0;h?(N=48,O=J=40):s?(N=J=40,O=36):(N=J=24,O=20);var V=N*Math.max(w+2,O)/O,K=[-V/2,-N/2,V,N,J*Q,J*K,J,J];v.se=7;v.aa.push(K)}v.Da.push(a.qd.Bk);v.se=11;v.aa.push([-Math.floor(w/2),M,w,L,u[0],u[1],u[2],u[3]]);a.ga||(a.ga=[]);a.ga.push(v)}}else if("poilabel"===x){M=[];for(c=1;c<p.length;c+=1)if(m=p[c],v=d.ww(m[1],q),!(0>v[0]||256<=v[0]||0>v[1]||256<=v[1])){u=t.Fz(v,b);v={id:m[4],margin:e,zIndex:9001,za:u,name:m[0].replace("^", ""),lk:!0,Ta:v,Da:[],aa:[],visible:!0,vk:!0};v.id||(v.id="poilabel_"+d.yb(v));F=0;v.Cd=m[8];m[6]&&(K=m[6].split(":"),F=K[1],L=Math.floor((parseInt(K[0].split("_")[1])-28)/2));if(F&&m[3]){K=r.tc+"://vdata.amap.com/style_icon/icon-"+(1===L?"biz-":"normal-")+(s||h?"big":"small")+".png";v.Da.push(K);F=parseInt(F)-1;K=Math.floor(F/10);Q=F%10;O=J=N=0;h?(N=48,J=40,O=28):s?(N=J=40,O=28):(N=J=24,O=20);V=N;if(151===F||152===F||153===F)O-=4,w=m[7][0][2],V=N*Math.max(w+2,O)/O;K=[-V/2,-N/2,V,N,J*Q,J*K,J,J];2<= F&&5>=F&&(K[8]=!0);v.aa.push(K)}if(m[2]&&m[7])for(w=m[2],K=0;K<m[2].length;K+=1)v.Da.push(a.qd.Bk),u=m[7][K],h&&(w[K][0]=Math.round(w[K][0]*y),w[K][1]=Math.round(w[K][1]*y),w[K][2]=Math.round(w[K][2]*y),w[K][3]=Math.round(w[K][3]*y)),Q=w[K][0],N=w[K][1]-(h?4:2),J=u[3],O=u[2],Q<-O&&F&&m[3]&&(Q=-O+v.aa[0][0]),Q-=2,v.se=J-4,4===f&&"\\u5317\\u4eac"===v.name&&(N=h?-50:-26),v.aa.push([Q,N,O,u[3],u[0],u[1],u[2],u[3]]);v.Es=m[5];v.Es&&M.push(v.Es);v.Vs=m[4];v.Ii=m[9];v.z6=m[10];v.eg=F;v.nv=L;a.ga||(a.ga=[]); a.ga.push(v)}a.pe||(a.pe={},a.pe.tf=M)}x===k[k.length-1]&&(a.status="loaded",a.Ra=a.Ba=!0)}}var d=this,e="3D"==a.Uf?0:-3,f=a.Ib,h=a.Jc,k=a.ga,l=a.VR,m=a.Ua,n=a.KS,p=a.PC,q=a.cf,r=this.r,s=this.l.ba,u=p[0].split("-");1===u.length&&(u=p[0].split("_"));a=parseInt(u[1]);var v=parseInt(u[2]),w=parseInt(u[0]),t=this,x=u[3],y=h?m:1,m=Math.pow(2,w);10>w&&(a<=l&&c(f,a+m,v,w),a>=m-l&&c(f,a-m,v,w));c(f,a,v,w)}}},function(a){a||(g.Jk.fta=!0)})}})();(function(){if(!g.Ec){g.Ec=g.GL();var a=g.a.mD({h:"on",ve:"hasEvents",G:"off",bK:"offByContext",q:"emit",ti:"clearEvents"});g.Ec.wf(null,function(){return{lsa:function(){var a=this;this.Yr=[];this.Zr={};if("undefined"!==typeof worker)for(var c=0;10>c;c++){var d=new Worker(this.pna);d.status={index:c,g5:!0,zK:!1,dL:0};d.addEventListener("message",function(c){var d=c.data;c=c.target;d.ping&&200===d.status?(c.status.zK=!0,a.Yr.filter(function(a){return a.status.zK}).length===a.Yr.length&&(a.Yr.zK=!0)): d.result&&a.$va(c,d)});this.Yr.push(d);d.postMessage({cmd:"ping",ts:(new Date).getTime()})}},$va:function(a,c){var d=c.parentTaskId,e=c.taskId,f=this.Zr[d],h=!1;f[e].data=c;f[e].index=a.status.index;for(var k=0,l=f.length;k<l;k++){var m=f[k];if(m&&m.Mc)if(m.data){var n=m.data;m.Mc(n.err,n.result,m.CL);m.CL.cl&&(h=!0);m.data=null;m.Uu=!0;m.Mc=null;m.CL=null;f[k]=null}else if(!m.Uu)break}h&&e===f.length-1&&!f[e]&&delete this.Zr[d];0===--a.status.dL&&(a.status.g5=!0)},jma:function(a,c,d){var e=a.parentTaskId; this.Yr.sort(function(a,b){return a.status.dL-b.status.dL});void 0===this.Zr[e]&&(this.Zr[e]=[]);this.Zr[e].push({CL:c,Mc:d});c=this.Yr[0];c.status.g5=!1;c.status.dL++;a.taskId=this.Zr[e].length-1;a.ts=(new Date).getTime();a.workerIndex=c.status.index;c.postMessage(a)},o6:function(a,c){var d=this;if(3<this.ou||this.disabled)return this.xh(a,c);var e=a.Ib,f=a.Md,h=a.Ie,k=a.fr,l=a.ysa,m=a.ga;if(h&&this.bC())this.Ll(e,c);else if(!this.Y4(a,function(a,b){var c=a.Ib,d=a.fr;b.reverse().forEach(function(a){a= c.indexOf(a);-1!==a&&d.splice(a,1)})},c)){var n=[(new Date).getTime(),this.za.length+1&65535,h?1:0,(""+Math.random()).slice(2,7)].join("-");this.Op[n]={Ib:e,Md:f,w:a,Mc:c,Ie:h};h||(this.Rk[n]=1);var e={command:"tiles",reqId:n,payload:{t:k,opt:f,cs:{level:f,flds:m.join(","),v:l?"3":"2"}}},p=this.send(e);this.CJ()||setTimeout(function(){d.CJ()||(d.ou?d.ou++:d.ou=1,d.qpa(p)&&(delete d.Op[n],delete d.Rk[n],d.xh(a,c)))},300);this.h("tiles",this.bE,this);this.h("ack",this.aE,this);this.h("disable",this.ZD, this)}},bna:function(a){this.P5()&&this.send(a)},ZD:function(){this.disabled=!0;this.close();for(var a in this.Op)this.Op.hasOwnProperty(a)&&this.nY(a)},nY:function(a){var c=this.Op[a];c&&(this.Ll(c.Ib,c.Mc),delete this.Op[a],delete this.Rk[a])},aE:function(a){var c=a.reqId,d=this.Op[c];d&&(a.content.status?d.Mc&&(d.Mc(null,{lc:d.w.lc,Lla:!0,kFa:!0},{Gq:!1,cl:!0}),delete this.Op[c],delete this.Rk[c]):this.nY(c))},bE:function(a){var c=this.Op[a.reqId];if(c)if(c.Ie){a=a.content.data;for(var d=0,e=a.length;d< e;d++)if(a[d]){var f=a[d];if(f.length){var h=f[0].split("-").slice(0,-1).join("/");this.Vj[h]?this.Vj[h].push(f):(this.Vj[h]=[f],this.Qt++);this.Vj[h].length===c.w.ga.length&&(this.Vj[h].VZ=!0)}}}else this.Ts(this.extend({Cn:!1},c.w,{dF:a.content.data,Md:a.content.opt}),c.Mc)},zva:function(a,c,d){var e=c.Cn,f=c.Bh;c.Fu||(c.Fu=[]);if(a.length){for(var h=function(a,b){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:p;a||(q.Ib=c.Ib.filter(function(a){return"loaded"===a.status}).map(function(a){return{key:a.key, status:a.status}}),q.data=b.data,q.Cn=e.cl,q.Cn&&(q.Fu=c.Fu,c.Fu=null));d(a,q,e)},k=this.extend({},f),l=0,m=a.length;l<m;l++){var n=a[l];n&&c.Fu.push({Oi:n.Oi,Ed:n.Ed,Oa:JSON.stringify(n)})}var p={Gq:!e,cl:!!e},q={lc:c.lc,Cu:c.Cu,Fu:[],Tg:{cf:f.cf,Nh:f.Nh,lf:f.lf,Md:c.Md}},e=c.Mf?"parseDataToWebGL":"parseDataToVector";if(c.Mf&&this.Yr&&this.Yr.zK)for(f=0,l=Math.ceil(a.length/15);f<l;f++)m=null,m=f===l-1?p:{Gq:!0,cl:!1},k.Oc=a.slice(15*f,15*(f+1)),this.jma({cmd:e,args:[k],parentTaskId:c.lc},m,h);else k.Oc= a,k.Te=this.Te,this[e](k,h)}else e&&(this.Zr?(a=this.Zr[c.lc])&&a.length&&a[a.length-1]&&(a[a.length-1].CL={Gq:!1,cl:!0}):d(null,{lc:c.lc,Ib:[],data:null,Cn:e},{Gq:!e,cl:!!e}))},Ts:function(a,c){for(var d=a.dF,e=[],f=0,h=d.length;f<h;f++){var k=d[f];k&&(a.xS&&(k=JSON.parse(k)),k["x-vd-v"]?(this.cf=a.Bh.cf=k["x-vd-v"],this.Nh=a.Bh.Nh=k.tv,this.lf=a.lf=[k.tv||"",k.vdv].join("-"),k.bgc&&(k="#"+k.bgc.substring(2),a.Cu!==k&&(a.Cu=k))):this.$D(this.extend({},a,{PC:k,Oc:e})))}this.zva(e,a,c)},IGa:function(a){for(var c= 0,d=a.length;c<d;c++){var e=a[c];e.Pp&&(self.xu(e.Pp),delete e.Pp)}}}});g.Ec.wf(null,new Function("\\n    return {\\n      "+a.on+": "+g.Mw.h.toString()+",\\n      "+a.hasEvents+": "+g.Mw.ve.toString()+",\\n      "+a.off+": "+g.Mw.G.toString()+",\\n      "+a.offByContext+": "+g.Mw.bK.toString()+",\\n      "+a.emit+": "+g.Mw.q.toString()+",\\n      "+a.clearEvents+": "+g.Mw.ti.toString()+"\\n    }\\n  "));g.FW?g.Ec.wf(null,g.FW,function(a){a||(g.Ec.q5=!0)}):g.Ec.q5=!0}})(); ');_jsload_('overlay', 'g.Aa.Dc=g.Aa.Oe.extend({A:function(a,b){var c=a.length;this.Qf=Array(c);for(var d,e,f=0;f<c;f+=1)if(d=a[f],e=new g.Aa.RL(d),this.Qf[f]=e,!b)if(0===f){if(0===d.length)break;e.tq(d)||d.reverse()}else 0!==d.length&&e.tq(d)&&d.reverse()},Kd:function(){if(0===this.Qf.length)return[Infinity,Infinity,-Infinity,-Infinity];if(!this.xg){for(var a=this.Qf[0].Kd(),b=1;b<this.Qf.length;b+=1){var c=this.Qf[b].Kd();g.I.M2(a,c)||g.I.extend(a,c)}this.xg=a}return this.xg},A4:function(){return this.Qf},DEa:function(){for(var a= 0;a<this.Qf.length;a+=1);},yi:function(){return g.Aa.Pe.EF},Sd:function(a){for(var b=this.Qf,c,d=0,e=b.length;d<e&&(c=b[d].Sd(a),0<d&&(c=!c),c);d+=1);return c},Yna:function(a){for(var b=this.Qf,c,d=[],e=0,f=b.length;e<f;e+=1)(c=g.wd.tq(b[e].za))?d.length&&d[d.length-1].push(e):d.push([e]);e=0;for(f=d.length;e<f;e+=1){c=!1;for(var h=0,k=d[e].length;h<k&&(c=g.Aa.RL.prototype.Sd.call(b[d[e][h]],a),0<h&&(c=!c),c);h+=1);if(c)return!0}}});g.Aa.wp=g.Aa.Oe.extend({A:function(a){var b=a.length;this.je=Array(b);for(var c=0;c<b;c+=1){var d=new g.Aa.Dc(a[c]);this.je[c]=d}},Kd:function(){if(!this.xg){for(var a=[Infinity,Infinity,-Infinity,-Infinity],b=this.je,c=0,d=b.length;c<d;c+=1)g.I.extend(a,b[c].Kd());this.xg=a}return this.xg},qR:function(){return this.za},yi:function(){return g.Aa.Pe.AF},T3:function(){return this.je},Sd:function(a){for(var b=!1,c=0,d=this.je.length;c<d;c+=1)if(this.je[c].Sd(a)){b=!0;break}return b}});g.Aa.qr=g.Aa.Oe.extend({A:function(a){this.za=a},Kd:function(){if(!this.xg){for(var a=[Infinity,Infinity,-Infinity,-Infinity],b=0,c=this.za.length;b<c;b+=1)g.I.II(a,this.za[b]);this.xg=a}return this.xg},qR:function(){return this.za},yi:function(){return g.Aa.Pe.NL},wqa:function(){return this.za.length},By:function(a){return g.wd.ls(a,this.za)}});g.Aa.RL=g.Aa.qr.extend({yi:function(){return g.Aa.Pe.nW},tq:g.wd.tq,Sd:function(a){return g.wd.Sd(a,this.za)}});g.Aa.Sw=g.Aa.Oe.extend({A:function(a){var b=a.length;this.za=a;this.je=Array(b);for(var c=0;c<b;c+=1){var d=new g.Aa.qr(a[c]);this.je[c]=d}},T3:function(){return this.je},Kd:function(){if(!this.xg){for(var a=[Infinity,Infinity,-Infinity,-Infinity],b=this.je,c=0,d=b.length;c<d;c+=1)g.I.extend(a,b[c].Kd());this.xg=a}return this.xg},qR:function(){return this.za},yi:function(){return g.Aa.Pe.YL},wqa:function(){return this.za.length},By:function(a){for(var b=Infinity,c=0,d=this.je.length;c<d;c+=1)b=Math.min(b, this.je[c].By(a));return b}});g.B.Zb=g.B.Eh.extend({A:function(a,b){arguments.callee.ma.apply(this,arguments);this.SH=a;this.X("options",a);this.X("geodesic",a);this.X("path",a);this.X("noSelect",a);this.Eu();this.X("display",b);b.h("zoomend",this.oo,this)},Yp:function(){if("3D"==this.map.D.view.type){var a=this.L;a&&(a.ec().Tj=!0)}},deltaPosChanged:function(){this.set("display")},geodesicChanged:function(){this.pathChanged()},Yo:function(a){var b=Math.pow(2,20-this.map.get("zoom")),c=this.get("path"),d=a.Nd(b),e=[],f,h,b=0;for(f= c.length;b<f;b+=1)h=this.map.Bb(c[b]).add(d),e.push(this.map.Od(h));0<e.length&&this.set("path",e);if(this.hu&&0<this.hu.length)for(b=0,c=this.hu.length;b<c;b+=1)this.hu[b].Yo(a)},rz:function(a,b,c){a=this.get("deltaPos")||[0,0];this.set("deltaPos",[c.x+a[0],c.y+a[1]]);this.SH.q("change",{type:"change",target:this.SH})},mB:function(a){this.get("options");return this.xga()?this.efa(a):this.xN(a)},xga:function(){var a=this.get("options");return a&&!!a.geodesic},getStrokeWeight:function(){return this.get("options").strokeWeight}, efa:function(a){if(!a||!a.length)return[];var b,c=[],d,e,f=[],h,k=this.map.get("resolution"),l=this.get("options").geodesicInterpolatePixelWidth||17;c.push(a[0]);f.push(this.yN(a[0]));d=1;for(e=a.length;d<e;d+=1)h=this.yN(a[d]),b=Math.round(Math.abs(h[0]-f[f.length-1][0])/k),b=Math.min(31,Math.round(b/l),Math.round(Math.abs(a[d-1].R-a[d].R))),"3D"==this.map.D.view.type&&(b=Math.round(b/1.2)),b=g.U.Mqa(a[d-1],a[d],b),c.push.apply(c,b),f.push.apply(f,this.xN(b)),c.push(a[d]),f.push(h);return f},pD:function(a, b,c){return[(b[0]-a[0])*c+a[0],(b[1]-a[1])*c+a[1]]},bI:function(a,b,c){var d=g.l.En?1:0,e=[],f=[],h,k,l,m,n,p,q;m=a.ec();m instanceof g.Aa.qr?q=[m]:m instanceof g.Aa.Sw&&(q=m.je);var r="",s=a.Ma.rotation;a=this.map.get("size");m=Math.PI*s/180;var u=(Math.abs(a.width*Math.cos(m))+Math.abs(a.height*Math.sin(m)))/2,v=(Math.abs(a.width*Math.sin(m))+Math.abs(a.height*Math.cos(m)))/2;a=[];h=0;for(k=q.length;h<k;h+=1)if(l=q[h].za,l.length){var w=0;n=0;for(p=l.length;n<p;n+=1)if(m=l[n],e=this.hg(m),e[0]= g.a.wb(e[0]+u,d),e[1]=g.a.wb(e[1]+v,d),0===n)f[0]=e[0],f[1]=e[1],r+=" M"+e[0]+" "+e[1];else if(e[0]!==f[0]||e[1]!==f[1]){if(b){var t=Math.sqrt(Math.pow(e[0]-f[0],2)+Math.pow(e[1]-f[1],2));if(40<t+w){var s=f,x=e;x[0]===s[0]?s=x[1]>s[1]?Math.PI:0:x[1]===s[1]?s=x[0]>s[0]?Math.PI/2:-Math.PI/2:(m=x[0]-s[0],x=x[1]-s[1],s=Math.atan(m/x),0<m&&0<x?s=Math.PI-s:0>m&&0>x?s=-s:0<m&&0>x?s=-s:0>m&&0<x&&(s=Math.PI-s));for(m=40-w;m<t;)x=this.pD(f,e,m/t),a.push(x[0],x[1],s),m+=40;w=(t-(40-w))%40}else w+=t}r+=" L"+ e[0]+" "+e[1];f[0]=e[0];f[1]=e[1]}}b=[r];if(a.length){f="";c/=2;m=3*Math.PI/4;for(q=0;q<a.length;q+=3)r=a[q],u=a[q+1],k=a[q+2]+m,h=a[q+2]-m,e=r+Math.sin(k)*c,k=u-Math.cos(k)*c,l=r+Math.sin(h)*c,h=u-Math.cos(h)*c,f+=" M"+g.a.wb(e,d)+" "+g.a.wb(k,d),f+=" L"+g.a.wb(r,d)+" "+g.a.wb(u,d),f+=" L"+g.a.wb(l,d)+" "+g.a.wb(h,d);b.push(f)}return b},Eu:function(){if(this.map&&!this.L){var a=this.map,b=this.get("path"),b=this.L=new g.ai({sN:this.Lb.MG,name:"polyline-"+g.a.yb(this),zIndex:this.get("options").zIndex|| 1,map:a,W:new g.Aa.qr(this.mB(b)),style:this.get("options")});b.uo=this;b.ec().Tj=!0;this.X("resolution",a);this.X("center",a);this.X("coords",b);this.X("style",b);b.af("noSelect visible zIndex strokeWeight isOutline deltaPos".split(" "),this)}},pathChanged:function(){var a=this.L,b=this.get("path");a&&(this.Yp(),this.set("coords",this.mB(b)),a.re=!0,"c"!==this.map.get("overlayRender")&&a.Ma?(b=this.Lb.get("showDir")&&g.l.BL,b=this.bI(a,b,this.Lb.get("strokeWeight")),0===b[0].length&&a.Ma?(g.f.remove(a.Ma.Oh), g.f.remove(a.Ma.Qc),g.f.remove(a.Ma.dir),a.Ma=null):g.l.En?(a.Ma.Oh.setAttribute("d",b[0]),a.Ma.Qc&&a.Ma.Qc.setAttribute("d",b[0]),a.Ma.dir&&b[1]&&a.Ma.dir.setAttribute("d",b[1])):(b=b[0]+" e",a.Ma.Oh.path=b,a.Ma.Qc&&(a.Ma.Qc.path=b))):this.set("display"))},oo:function(){},visibleChanged:function(){this.L&&(this.L.Ma?this.get("visible")?(this.L.Ma.Oh.style.display="block",this.L.Ma.Qc&&(this.L.Ma.Qc.style.display="block"),this.L.Ma.dir&&(this.L.Ma.dir.style.display="block")):(this.L.Ma.Oh.style.display= "none",this.L.Ma.Qc&&(this.L.Ma.Qc.style.display="none"),this.L.Ma.dir&&(this.L.Ma.dir.style.display="none")):this.set("display"))},optionsChanged:function(){this.Yp();this.L&&(this.L.style=this.get("options"),this.L.zIndex=this.get("options").zIndex,this.L.qs(),this.L.Ma&&(g.f.remove(this.L.Ma.Oh),g.f.remove(this.L.Ma.Qc),g.f.remove(this.L.Ma.dir)));this.set("display")}});g.B.sA=g.B.Zb.extend({A:function(a,b){this.dma=a;arguments.callee.ma.apply(this,arguments);this.X("tolerance",a);b.h("zoomend",this.oo,this)},Yo:function(a){var b=Math.pow(2,20-this.map.get("zoom")),c=this.get("path"),d=a.Nd(b),e=[],f,h,b=0;for(f=c.length;b<f;b+=1){h=this.map.Bb(c[b]).add(d);var k=this.map.Od(h);e.push(k);if(c[b].controlPoints){k.controlPoints=[];for(var l=c[b].controlPoints,m=0,n=l.length;m<n;m+=1)h=this.map.Bb(l[m]).add(d),k.controlPoints.push(this.map.Od(h))}}0<e.length&&this.set("path", e);if(this.hu&&0<this.hu.length)for(b=0,c=this.hu.length;b<c;b+=1)this.hu[b].Yo(a)},rz:function(a,b,c){a=this.get("deltaPos")||[0,0];this.set("deltaPos",[c.x+a[0],c.y+a[1]]);this.SH.q("change",{type:"change",target:this.SH})},xN:function(a){var b=Math.pow(2,20-Math.round(this.map.get("zoom")));return g.Jw.g4(a,this.map.mj,b,this.dma.w)},toleranceChanged:function(){this.pathChanged()},oo:function(){this.pathChanged()},Rt:function(a,b){for(var c=[],d=void 0,e=void 0,f=void 0,d=0,e=a.length;d<e;d+=1){f= this.map.Bb(a[d]);f.x+=b[0];f.y+=b[1];var h=this.map.Od(f);c.push(h);if(a[d].controlPoints){h.controlPoints=[];for(var k=a[d].controlPoints,l=0,m=k.length;l<m;l+=1)f=this.map.Bb(k[l]),f.x+=b[0],f.y+=b[1],h.controlPoints.push(this.map.Od(f))}}return c}});g.B.Dc=g.B.Eh.extend({A:function(a,b){arguments.callee.ma.apply(this,arguments);this.tC=a;this.X("options",a);this.X("path",a);this.Eu();this.X("display",b)},Yp:function(){if("3D"==this.map.D.view.type){var a=this.L;if(a)for(var a=a.ec().je,b=0;b<a.length;b+=1)a[b].Tj=!0}},deltaPosChanged:function(){this.set("display")},Yo:function(a){var b=Math.pow(2,20-this.map.get("zoom")),c=this.get("path");a=a.Nd(b);var b=[],d,e,f;c.length&&c[0]instanceof g.U&&(c=[c],e=!0);if(c.length){c[0]instanceof g.U?(c= [[c]],e=!0):c[0]instanceof Array&&c[0][0]instanceof g.U&&(f=!0,c=[c]);for(var h=0,k=c.length;h<k;h+=1){for(var l=c[h],m=[],n=0,p=l.length;n<p;n+=1){for(var q=l[n],r=[],s=0,u=q.length;s<u;s+=1)d=this.map.Bb(q[s]).add(a),r.push(this.map.Od(d));m.push(r)}b.push(m)}this.tC.q("movepoly",{pK:a});0<b.length&&(e?b=b[0][0]:f&&(b=b[0]),this.set("path",b))}},rz:function(a,b,c){a=this.get("deltaPos")||[0,0];this.set("deltaPos",[c.x+a[0],c.y+a[1]]);this.tC.q("movepoly",{pK:c});this.tC.q("change",{type:"change", target:this.tC});this.tC.q("setPath")},Rt:function(a,b){var c=this.map.D,d=[];if(g.a.isArray(a)){if(g.a.isArray(a[0]))for(c=0;c<a.length;c+=1)d[c]=this.Rt(a[c],b);else for(var e=0,f=a.length;e<f;e++){var h=c.Bb(a[e]);h.x+=b[0];h.y+=b[1];d.push(c.Od(h))}return d}},dna:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];return a.length?a[0]instanceof g.U?[[a]]:a[0]instanceof Array&&a[0][0]instanceof g.U?[a]:a:a},mB:function(){for(var a=0<arguments.length&&void 0!==arguments[0]? arguments[0]:[],a=this.dna(a),b,c,d=[],e=this.map,f=0;f<a.length;f+=1){for(var h=a[f],k=[],l=0;l<h.length;l+=1){var m=h[l],n=[];b=0;for(c=m.length;b<c;b+=1){var p=e.Bb(m[b]);n.push([p.x,p.y])}k.push(n)}d.push(k)}return d},Eu:function(){if(this.map&&!this.L){var a=this.map,b=this.get("path"),b=this.L=new g.ai({sN:this.Lb.MG,name:"polygon-"+g.a.yb(this),zIndex:this.get("options").zIndex||1,map:a,W:new g.Aa.wp(this.mB(b)),style:this.get("options")});b.uo=this;for(var c=b.ec().je,d=0;d<c.length;d+=1)c[d].Tj= !0;this.X("resolution",a);this.X("center",a);this.X("coords",b);this.X("style",b);b.af(["visible","zIndex","strokeWeight","deltaPos"],this)}},pathChanged:function(){var a=this.L,b=this.get("path");a&&(this.set("coords",this.mB(b)),this.Yp(),a.re=!0,"c"!==this.map.get("overlayRender")&&a.fa?(b=this.cI(a),0===b.length?(a.fa.parentNode.removeChild(a.fa),a.fa=null):g.l.En?a.fa.setAttribute("d",b.join(" ")):(b.push("e"),a.fa.path=b.join(" "))):this.set("display"))},getStrokeWeight:function(){return this.get("options").strokeWeight}, visibleChanged:function(){this.L&&(this.L.fa?this.get("visible")?this.L.fa.style.display="block":this.L.fa.style.display="none":this.set("display"))},optionsChanged:function(){this.Yp();this.L&&(this.L.style=this.get("options"),this.L.zIndex=this.get("options").zIndex,this.L.qs());this.set("display")},cI:function(a){var b=[NaN,NaN,0],c=[NaN,NaN],d,e,f,h,k,l,m,n=a.fa.rotation,p=this.map.get("size");e=Math.PI*n/180;n=(Math.abs(p.width*Math.cos(e))+Math.abs(p.height*Math.sin(e)))/2;p=(Math.abs(p.width* Math.sin(e))+Math.abs(p.height*Math.cos(e)))/2;a=a.ec();a instanceof g.Aa.Dc?d=[a]:a instanceof g.Aa.wp&&(d=a.je);var q=[];a=0;for(e=d.length;a<e;a+=1)if(b=d[a],f=b.Qf,h=f.length,0<h)for(var r=0;r<h;r+=1){var s;k=f[r].za;l=0;for(m=k.length;l<m;l+=1)if(b=k[l],b=this.hg(b),b[0]=Math.ceil(b[0]+n),b[1]=Math.ceil(b[1]+p),0===l)c[0]=NaN,c[1]=NaN,s=b,q.push("M"+b[0]+" "+b[1]);else if(b[0]!==c[0]||b[1]!==c[1])q.push("L"+b[0]+" "+b[1]),c=b;s&&q.push("L"+s[0]+" "+s[1])}return q}});g.B.gh=g.B.Eh.extend({A:function(a,b){arguments.callee.ma.apply(this,arguments);this.X("center",a);this.X("draggable",a);this.X("unit",a,!0);this.X("radius",a);this.X("options",a);this.Eu();this.X("display",b)},Yo:function(a){var b=this.get("center");a=a.Nd(Math.pow(2,20-this.map.get("zoom")));a=this.map.Bb(b).add(a);b instanceof g.U?this.set("center",this.map.Od(a)):this.set("center",a)},rz:function(a,b,c){a=this.get("deltaPos")||[0,0];this.set("deltaPos",[c.x+a[0],c.y+a[1]]);this.Lb.q("change", {type:"change",target:this.Lb})},Eu:function(){if(this.map&&!this.L){var a=this.map,b=a.Bb(this.get("center")),c="px"===this.get("unit"),b=this.L=new g.ai({wB:!0,sN:this.Lb.MG,name:"circle-"+g.a.yb(this),zIndex:this.get("options").zIndex||1,map:a,W:new g.Aa.Mg([b.x,b.y]),style:this.get("options")});b.wv=c;b.uo=this;b.ec().Tj=!0;this.X("resolution",a);this.X("coords",b);this.X("style",b);b.X("visible",this,!0);b.af("radius center unit resolution zIndex strokeWeight deltaPos".split(" "),this)}},Yp:function(){if("3D"== this.map.D.view.type){var a=this.L;a&&(a.ec().Tj=!0)}},deltaPosChanged:function(){this.set("display")},getStrokeWeight:function(){return this.get("options").strokeWeight},centerChanged:function(){var a=this.L,b=this.map.Bb(this.get("center"));a&&(a.ec().za=[b.x,b.y],this.Yp(),this.set("coords",[b.x,b.y]),this.re=!0,a.fa?this.d8():this.set("display"))},visibleChanged:function(){this.L&&(this.L.fa?this.get("visible")?this.L.fa.style.display="block":this.L.fa.style.display="none":this.set("display"))}, optionsChanged:function(){this.L&&(this.Yp(),this.L.style=this.get("options"),this.L.zIndex=this.get("options").zIndex,this.L.qs(),this.L.re=!0,this.set("display"))},RP:function(a){var b=[],c=[],d,c=a.ec();c instanceof g.Aa.Mg&&(d=[c]);var c=this.map.D.mj.mq(Math.floor(this.map.get("zoom"))),e=a.fa.rotation,b=this.map.get("size"),f=Math.PI*e/180,e=(Math.abs(b.width*Math.cos(f))+Math.abs(b.height*Math.sin(f)))/2,f=(Math.abs(b.width*Math.sin(f))+Math.abs(b.height*Math.cos(f)))/2,b=this.hg(d[0].za); b[0]=Math.round(b[0]+e);b[1]=Math.round(b[1]+f);a=a.get("remain")?5.23:a.wv?this.get("radius"):this.get("radius")/(c*Math.cos(Math.PI*this.get("center").Q/180));return c=["M",b[0],b[1]-a,"A",a,a,0,1,1,b[0]-0.01,b[1]-a,"Z"].join(" ")},d8:function(){var a=this.L,b=this.get("radius");if("c"!==this.map.get("overlayRender")&&a.fa)if(g.l.En)b=this.RP(a),a.fa.setAttribute("d",b);else{b=this.map.D.mj.mq(Math.floor(this.map.get("zoom")));b=a.wv?this.get("radius"):this.get("radius")/(b*Math.cos(Math.PI*this.get("center").Q/ 180));a.fa.style.width=Math.round(2*b);a.fa.style.height=Math.round(2*b);var c=this.map.get("size").width/2,d=this.map.get("size").height/2,e=this.hg(a.ec().za);e[0]=Math.round(e[0]+c);e[1]=Math.round(e[1]+d);a.fa.style.top=Math.round(e[1]-b);a.fa.style.left=Math.round(e[0]-b)}else this.set("display")},radiusChanged:function(){var a=this.L,b=this.get("radius");a&&(this.Yp(),a.style.radius=b,a.re=!0,a.q("rad",{target:a,tl:b}),this.d8())}}); ');_jsload_('wgl', 'g.l.pp&&(g.z$=function(a){function b(a,b,c,e,f,h,k){var l=a.Oa;c=[];e=a.Hg;var m=null,n=null,s;a.Oa=[];h=h&&16<b;for(var w=[],t=[],Q=[],N=1,J=l.length;N<J;N+=1){var O=l[N],V=O[1].split("&"),m=p(x?x:V[0]),n=p(V[4]);s=O[6];var R=O[0],S=O[3]*Math.pow(2,2)*k,T=O[4],W={},U=O[5],O=[];if(U&&U.length)for(var X=0,Z=U.length;X<Z;X+=1){var Y=U[X].split("-"),V=Y[1].split("^");O[Y[0]]=V;for(var Y=0,aa=V.length;Y<aa;Y+=1)-1===d(c,V[Y])&&c.push(V[Y])}if(T&&T.length)for(U=0,Z=T.length;U<Z;U+=1){V=T[U].split("-"); Y=parseInt(V[0]);W[Y]={};for(var aa=1,da=V.length;aa<da;aa+=1)W[Y][parseInt(V[aa])]=!0}U=0;for(T=R.length;U<T;U+=1){V=R[U];y||(w=[],Q=[],t=[]);for(var V=r(V,v,b),Z=q(V,e,f,!0),V=Z[1],Y=[],X=da=aa=0,Aa=V.length-1;X<Aa;X+=1){var ha=V[X],ea=V[X+1],aa=aa+ha[0],da=da+ea[1];if(!W[U]||!W[U][X])if(h){var la=ea[0]-ha[0],ia=ea[1]-ha[1],ta=5E3+la+(5E3+ia)/1E4,ia=Math.sqrt(Math.pow(la,2)+Math.pow(ia,2)),la=Math.round(S/64),ia=Math.ceil(ia/64);la?t.push(0,0,ia,la,0,la,0,0,ia,0,ia,la):t.push(-1,-1,-1,-1,-1,-1, -1,-1,-1,-1,-1,-1);w.push(ha[0],ha[1],-S,ta);w.push(ea[0],ea[1],0,ta);w.push(ha[0],ha[1],0,ta);w.push(ha[0],ha[1],-S,ta);w.push(ea[0],ea[1],-S,ta);w.push(ea[0],ea[1],0,ta)}else Q.push(ha[0],ha[1],0,-1,ea[0],ea[1],0,-1);Y.push([ha[0],ha[1]])}X=V.length-1;aa=[aa/X+215440491,da/X+106744817];V=u.Vh(h?Y:V,[],0,1);Y=0;for(da=V.length;Y<da;Y+=1)X=-S,h||(X=0),t.push(-1,-1),w.push(V[Y][0],V[Y][1],X,0);!y&&w.length&&(V=[m,n,s],Z=[new Float32Array(w),new Float32Array(t),new Float32Array(Q),V,Z[1],aa],O[U]&& (Z.Mra=O[U]),a.Oa.push(Z))}}y&&w.length&&(b=256*Math.pow(2,20-e.z),aa=[e.x*b+128,e.y*b+128],Z=[new Float32Array(w),new Float32Array(t),new Float32Array(Q),[m,n,s],null,aa],a.Oa.push(Z));a.Bn=c;return a}function c(a,b,c,e,f,h){c=a.Oa;e=[];for(var k=a.Hg,l=null,m=null,n={},s=1,w=c.length;s<w;s+=1){var t=c[s],y=t[1].split("&"),l=p(x?x:y[0]),m=p(y[2]),N=y[0]+y[2];n[N]||(n[N]={b$:[],C8:[],Mb:[],ke:[],ZQ:l,borderColor:m,Yc:t[6]});var l=n[N].b$,m=n[N].C8,y=n[N].Mb,N=n[N].ke,J=t[0],O=t[3]*Math.pow(2,2),V= t[4],R={};if((t=t[5])&&t.length)for(var S=0,T=t.length;S<T;S+=1)for(var W=t[S].split("-")[1].split("^"),U=0,X=W.length;U<X;U+=1)-1===d(e,W[U])&&e.push(W[U]);if(V&&V.length)for(t=0,S=V.length;t<S;t+=1)for(T=V[t].split("-"),W=parseInt(T[0]),R[W]={},U=1,X=T.length;U<X;U+=1)R[W][parseInt(T[U])]=!0;t=0;for(V=J.length;t<V;t+=1){for(var Z=J[t],Z=r(Z,v,b),Z=q(Z,k,f,!0)[1],S=[],T=0,W=Z.length-1;T<W;T+=1){var U=Z[T],X=Z[T+1],Y=[U[0]-0*O,U[1]-0.3*O],aa=[X[0]-0*O,X[1]-0.3*O];R[t]&&R[t][T]||(h?((X[0]-U[0])*(Y[1]- U[1])<(Y[0]-U[0])*(X[1]-U[1])&&(l.push(Y[0],Y[1],2),l.push(X[0],X[1],-1),l.push(U[0],U[1],-1),l.push(Y[0],Y[1],2),l.push(aa[0],aa[1],2),l.push(X[0],X[1],-1),N.push([U,X,aa,Y])),y.push(Y[0],Y[1],-1,aa[0],aa[1],-1)):y.push(U[0],U[1],-1,X[0],X[1],2));S.push([Y[0],Y[1]])}Z.pop();T=u.Vh(h?S:Z,[],0,1);N.push(h?S:Z);Z=0;for(S=T.length;Z<S;Z+=1)m.push(T[Z][0],T[Z][1],3)}}a.Oa=[];for(Z in n)n.hasOwnProperty(Z)&&(y=[n[Z].ZQ,n[Z].borderColor,n[Z].Yc],a.Oa.push([new Float32Array(n[Z].b$),new Float32Array(n[Z].C8), new Float32Array(n[Z].Mb),y,n[Z].ke]));a.Bn=e;return a}function d(a,b){if(a&&!a.length)return-1;if(a.indexOf)return a.indexOf(b);for(var c=0;c<a.length;c+=1)if(a[c]===b)return c;return-1}function e(a,b,c){var d=a.Oa,e=[],f={0:"ffde0000",1:"ffffcc00",2:"ff33b100",3:"ff8c0e0e",4:"ffadadad"};c&&(c.congested&&(f[0]=c.congested),c.slow&&(f[1]=c.slow),c.smooth&&(f[2]=c.smooth),c.seriousCongested&&(f[3]=c.seriousCongested),c.unknown&&(f[4]=c.unknown));c=0;for(var h=d.length;c<h;c++){for(var l=[],m=0,n=d[c].length;m< n;m++){var s=[],r=[];k(s,r,d[c][m][1],a.ta,b);s.forEach(function(a,b){l.push([a,r[b]])})}if(l.length){var q=[[],[],{width:0.75*d[c][0][0],borderColor:p(f[c])}];l.forEach(function(a){var b=q[0].length/9;b&&(a[1]=a[1].map(function(a){return a+b}));q[0]=q[0].concat(a[0]);q[1]=q[1].concat(a[1])});q[0]=new Float32Array(q[0]);q[1]=new Uint16Array(q[1]);e.push(q)}}a.Oa=e;return a}function f(a,b,c,d,e,f){function k(a){for(var b=0,c=0,d=a.length;c<d;c++)b+=a[c][0].length/s-1;return b}function l(){Ba.Z.push(new Float32Array(la)); Ba.bc.push(new Uint16Array(ia))}function m(){la=[];ia=[];ta=[];Ha=Ia=0}function n(a,b){for(var c=0,d=a.length;c<d;c++)a[c]+=b;return a}for(var s=11,r="solid solid_roundcap solid_squarecap dash railway dash_crewel".split(" "),q=a.Oa.slice(1),v=q.length-1;0<=v;v--)q[v].p5=v;q.sort(function(a,b){return a[2]>b[2]?1:a.p5>b.p5?1:-1});for(var u={},v=0,t=q.length;v<t;v+=1){var x=q[v],y=x[1].split("&"),R,S,T,W,U;R=S=T=W=U=null;var X,Z,Y,aa,da=null,Aa=!1;X=Z=Y=aa=null;y[1]&&(R=p(y[1]));S=parseInt(y[0]);T=y[2]; T!==r[0]&&(T===r[1]?X="round":T===r[2]?X="square":0===T.indexOf(r[5])?(da=!0,Y=[3,2]):0===T.indexOf(r[3])?(Y=T.substring(5).split(")")[0].split(","),Y.forEach(function(a,b){Y[b]*=e})):0===T.indexOf(r[4])&&(W=R,R=y[4]?p(y[4]):[1,1,1,R[3]],Y=[12,12],Aa=!0,U=3,S=1));y[3]&&y[4]&&3<y.length&&(U=S+parseInt(y[3]),W=p(y[4]),T=y[5],T!==r[0]&&(T===r[1]?Z="round":T===r[2]?Z="square":0!==T.indexOf(r[5])&&0===T.indexOf(r[3])&&(U+=1,aa=T.substring(5).split(")")[0].split(","),aa.forEach(function(a,b){aa[b]*=e})))); if(c){if(Y)for(y=Y.length-1;0<=y;y-=1)Y[y]*=e;if(aa)for(y=aa.length-1;0<=y;y-=1)aa[y]*=e}var ha=[];ha.Tc=0;T=[];var ea=[];h(ha,ea,T,x[0],a.Hg,b,c,d,e,X);"app"===w&&(S/=4,U/=4);y=[S,R,Y,U,W,aa,da,Aa,X,Z,x[3],x[4],x[4].id];x=x[2];u[x]||(u[x]=[]);R=[ha,ea,y];f&&R.push(T);u[x].push(R)}var la=void 0,ia=void 0,ta=void 0,Ia=void 0,Ha=void 0,Ba={Z:[],bc:[],hash:{}};m();for(var Ca in u)if(u.hasOwnProperty(Ca)){b=u[Ca];65535<k(b)+ia[ia.length-1]+10&&(l(),m());c=[];d=Ba.bc.length;f=0;for(r=b.length;f<r;f++)q= b[f],v=null,la=la.concat(q[0]),ia=ia.concat(n(q[1],Ia)),v=new Float32Array([d,q[1].length,2*Ha]),c.push(v),Ia+=q[0].length/s,Ha+=q[1].length,q[2].fva=q[3],b[f]=q[2];Ba.hash[Ca]=c;ta.push(Ca)}l();u.buffer=Ba;a.Oa=u;return a}function h(a,b,c,d,e,f,h,k,l,m){for(var n=0,p=d.length;n<p;n+=1){var s=a.length/11,u=s+6,w=r(d[n],v,f),t=q(w,e,k);if(1<t[1].length){for(var w=t[0],x=t[2],y=0,t=t[1].length;y<t;y+=1){if(0<y){var R=w[2*y]-w[2*y-2],S=w[2*y+1]-w[2*y-1];a.Tc+=Math.sqrt(R*R+S*S)*(h?l:1)}var R=w[2*y], S=w[2*y+1],T=x[y][0],W=x[y][1],U,X;y===t-1?(U=w[2*t-2],X=w[2*t-1]):(U=w[2*y+2],X=w[2*y+3]);var Z,Y;0===y?(Z=R,Y=S):(Z=w[2*y-2],Y=w[2*y-1]);if(0!==y){var aa=y===t-1?0:-1;a.push(R,S,T,W,1,Z,Y,aa,U,X,a.Tc);a.push(R,S,T,W,-1,Z,Y,aa,U,X,a.Tc)}else a.push(R,S,T,W,0,Z,Y,0,U,X,a.Tc),a.push(R,S,T,W,1,Z,Y,0,U,X,a.Tc),a.push(R,S,T,W,1,Z,Y,1,U,X,a.Tc),a.push(R,S,T,W,0,Z,Y,1,U,X,a.Tc),a.push(R,S,T,W,-1,Z,Y,1,U,X,a.Tc),a.push(R,S,T,W,-1,Z,Y,0,U,X,a.Tc),m&&(b.push(s+2,s+0,s+3),b.push(s+2,s+1,s+0),b.push(s+3,s+0, s+4),b.push(s+4,s+0,s+5));y!==t-1?(aa=0===y?0:1,a.push(R,S,T,W,1,Z,Y,aa,U,X,a.Tc),a.push(R,S,T,W,-1,Z,Y,aa,U,X,a.Tc)):(a.push(R,S,T,W,0,Z,Y,0,U,X,a.Tc),a.push(R,S,T,W,1,Z,Y,0,U,X,a.Tc),a.push(R,S,T,W,1,Z,Y,-1,U,X,a.Tc),a.push(R,S,T,W,0,Z,Y,-1,U,X,a.Tc),a.push(R,S,T,W,-1,Z,Y,-1,U,X,a.Tc),a.push(R,S,T,W,-1,Z,Y,0,U,X,a.Tc));y!==t-1?(b.push(u+4*y,u+4*y+3,u+4*y+1),b.push(u+4*y,u+4*y+2,u+4*y+3)):m&&(R=u+4*(t-1),b.push(R+1,R+2,R+0),b.push(R+2,R+3,R+0),b.push(R+0,R+4,R+5),b.push(R+0,R+3,R+4))}c.push(x)}}} function k(a,b,c,d,e){for(var f=[],h=0,k=c.length;h<k;h+=1){var l=[],m=[],n=r(c[h]),p=q(n,d,e);f.push(p[2]);if(1<p[1].length){var s=p[1].length;p[1].forEach(function(a,b,c){var d=c[b-1];c=c[b+1];0===b?d=a:b===s-1&&(c=a);l.push(a[0],a[1],p[2][b][0],p[2][b][1],1,d[0],d[1],c[0],c[1]);l.push(a[0],a[1],p[2][b][0],p[2][b][1],-1,d[0],d[1],c[0],c[1]);0===b?m.push(0,1,2):b!=s-1?(m.push(2*(b-1)+1,2*b+1,2*b),m.push(2*b,2*b+1,2*(b+1))):m.push(2*(b-1)+1,2*b+1,2*b)});a.push(l);b.push(m)}}}function l(a,b,c,d,e, f,h,k){for(var l=0,m=d.length;l<m;l+=1){var n=a.length/2,p=q(r(d[l],v,f),e,h);if(2<p[1].length&&(n=u.Vh(p[1],[],n),n.length&&(a.push.apply(a,p[0]),b.push.apply(b,n),c.push(p[2]),k)))for(var n=0,s=p[2].length;n<s;n+=1){var w=p[2][n][0]/512,t=p[2][n][1]/512;1==e.x%2&&(w+=0.5);1==e.y%2&&(t+=0.5);k.push(w,t)}}}function m(a,b,c,d){function e(a,b){for(var c=0,d=a.length;c<d;c++)a[c]+=b;return a}var f=a.Oa,h=[],k=[],m=[],s=[];n(a,k,m,c);for(var r=[[[0,0],[255,0],[255,255],[0,255]]],q=[[0,0],[255,0],[0,255], [255,255]],v=a.Hg,u=0,w=q.length;u<w;u+=1){var t=q[u][0]/512,x=q[u][1]/512;1==v.x%2&&(t+=0.5);1==v.y%2&&(x+=0.5);s.push(t,x)}h.push([k,m,p("ff"+a.hy.substr(1)),"regions:land",r,s,"30001:1"]);f.sort(function(a,b){return"string"===typeof a?-1:"string"===typeof b?1:a[2]>b[2]?1:a[2]<b[2]?-1:0});q=1;for(v=f.length;q<v;q+=1)u=f[q],k=[],m=[],r=[],s=[],w=p(u[1].split("&")[0]),l(k,m,r,u[0],a.Hg,b,c,s),k=[k,m,w,u[3],null,s,u[4]],d&&(k[4]=r),h.push(k);b={tp:[],We:[],Z:[],bc:[],zl:[]};f=d=c=0;for(r=h.length;f< r;f++)k=h[f],b.Z.push.apply(b.Z,k[0]),b.bc.push.apply(b.bc,e(k[1],c)),b.zl.push.apply(b.zl,k[5]),b.We.push([k[2],k[6]]),b.tp.push([k[1].length,2*d]),d+=k[1].length,c+=k[0].length/2,delete k[0],delete k[1],delete k[5];b.Z=new Float32Array(b.Z);b.bc=new Uint16Array(b.bc);b.zl=new Float32Array(b.zl);h.buffer=b;a.Oa=h;return a}function n(a,b,c,d){var e=a.Hg;a=256*e.x*d-215440491;e=256*e.y*d-106744817;b.push(a,e);var f=256*d;d=a+f;b.push(d,e);e+=f;b.push(a,e);b.push(d,e);c.push(0,1,2,1,3,2)}function p(a){for(var b= [],c=0,d=a.length;c<d;c+=2)b.push(parseInt(a.substr(c,2),16)/255);b.push(b.shift());return b}function q(a,b,c,d){var e=0,f=0,e=256*b.x,f=256*b.y;b=[];for(var h=[],k=[],l=0,m=a.length;l<m;l+=2){var n=(e+a[l])*c-215440491,p=(f+a[l+1])*c-106744817,s=k.length;if(d||0===b.length)k.push(n),k.push(p),b.push([n,p]),h.push([a[l],a[l+1]]);else if(n!==k[s-2]||p!==k[s-1])n===k[s-2]&&n===k[s-4]?(k[s-1]=p,b[b.length-1][1]=p,h[b.length-1][1]=a[l+1]):p===k[s-1]&&p===k[s-3]?(k[s-2]=n,b[b.length-1][0]=n,h[b.length- 1][0]=a[l]):(k.push(n),k.push(p),b.push([n,p]),h.push([a[l],a[l+1]]))}return[k,b,h]}function r(a,b,c){var d="ASDFGHJKLQWERTYUIO!sdfghjkleiu3~yr5-P&mq9`%zCN*b=8@^xpVM";b=b||"v5";var e,f;"v5"<b?(e=d.length,f=512):(e=27,d=d.substr(0,27),f=333);var h,k,l,m,n;k=[];l=NaN;m=0;for(n=a.length;m<n;m++)h=a[m],h=d.indexOf(h),isNaN(l)?l=h*e:(h=l+h-f,18===c&&"v5"<b&&(h/=4),k.push(h),l=NaN);return k}function s(a,b){for(var c=0,d=b.length;c<d;c++)a.push(b[c])}var u=null,v=1,w,t=!1,x=null,y=!0;return{parseDataToWebGL:function(d, e){function h(a,b){var c=[];if("road"===b){if(a.Oa&&a.Oa.buffer)for(var d=a.Oa.buffer,e=0,f=d.Z.length;e<f;e++)c.push(d.Z[e].buffer,d.bc[e].buffer)}else if("region"===b)a.Oa&&a.Oa.buffer&&(d=a.Oa.buffer,c.push(d.bc.buffer,d.zl.buffer,d.Z.buffer));else if("building"===b&&a.Oa)for(d=0,e=a.Oa.length;d<e;d++)f=a.Oa[d],c.push(f[0].buffer,f[1].buffer),f[2].byteLength&&c.push(f[2].buffer);c.length&&this.xu(c)}function k(a){var b=a.Oa;s&&b&&1<b.length&&b.slice(1).forEach(function(b){if(b&&null===b[1]){var c= b[b.length-1],d=s[c];b[1]=d.browserStyle[d.levelStyleMapping[n]];"road"===a.Ed&&(b[1]=b[1][0],b[4]=d,b[4].id=c)}})}u=this.Vh?this:g.Ec;v=d.cf;t=d.wS;w=d.mode;y=d.Of;var l=t?b:c,n=d.jz,p=d.Qq,s=null;x=d.Ur;var r=d.ba,q=[],M=Math.pow(2,20-n),K=!!d.Bd;void 0!==d.ey&&(s=d.Te[d.ey].stylemaps);for(var F=0,Q=d.Oc.length;F<Q;F+=1){var N=d.Oc[F],J=N.Ed,O=null;k(N);switch(J){case "region":O=m(N,n,M,K);break;case "road":O=f(N,n,p,M,d.z8,K);break;case "building":O=l(N,n,p,r,M,d.VP,d.Yy)}a&&h.call(self.xu?self: this,O,J);O&&q.push(O)}delete d.Te;d.Oc=q;e(null,{data:d})},Fva:function(a,b){u=this.Vh?this:g.Ec;for(var c=a.Oc,d=Math.pow(2,20-a.Md),f=[],h=0,k=c.length;h<k;h++)f.push(e(c[h],d,a.Dya));a.Oc=f;b(null,{data:a})},C7:function(a,b){u=this.Vh?this:g.Ec;for(var c=a.Mv,d=0;d<c.length;d+=1){for(var e=[],f=0;f<c[d].length;f+=1)e.push(c[d][f][0],c[d][f][1]);c[d]=e}var h,d=[],e=[];a:{for(var k={x:0,y:0},l,m=[],n=[],f=[],p=0;p<c.length;p+=1){var r=c[p].length;4<=r&&c[p][0]==c[p][r-2]&&c[p][1]==c[p][r-1]&&c[p].splice(r- 2);r=q(c[p],k,1);if(0==p){if(3>r[1].length)break a;l=r[1];h=r[0]}else 2<r[1].length&&(m.push(r[1]),n.push(r[2]),f.push(r[0]))}c=u.Vh(l,m,0);if(c.length)for(s(e,c),s(d,h),p=0;p<f.length;p+=1)s(d,f[p])}h=[new Float32Array(d),65535<d.length/2?new Uint32Array(e):new Uint16Array(e),{},[]];b(null,{data:h})},w7:function(a,b){u=this.Vh?this:g.Ec;var c=a.mb,d=a.tl,e=0,f=Math.PI/180*6,h=[],k=[];h.push(c[0],c[1]);for(var l=0;60>l;l++)h.push(c[0]+d*Math.cos(e),c[1]+d*Math.sin(e)),e+=f,0<l&&k.push(0,l,l+1),59== l&&k.push(0,l+1,1);b(null,{data:[h,k]})},HGa:function(){}}},g.Ec&&(g.Ec.wf(null,g.rF),g.Ec.wf(null,g.JL),g.Ec.wf(null,g.z$)));(function(){function a(){function a(b,c,d,e,f,k){var l=[0,0,0,0,0],m=d.slice(0,4).concat(l),r=[],q=Math.PI/180*6,B=void 0,G=void 0,B=d.slice(0,2),H=n(e),I=n(f),G=s.normalize((new h(H)).yf(new h(B))),P=s.normalize((new h(I)).yf(new h(B)));s.BS(G,k)?(B=s.xJ(G),G=s.xJ(P)):(B=s.xJ(P),G=s.xJ(G),k=[I,H],H=k[0],I=k[1],f=[f,e],e=f[0],f=f[1]);H=Math.ceil(Math.abs(G-B)/q);30<=H&&(H=60-H);for(k=0;k<H;k++)0===k?(m.push.apply(m,e.slice(0,4)),m.push.apply(m,l)):(I=(k*q+B)%(2*Math.PI),m.push.apply(m,d.slice(0,2).concat([0, 0])),m.push(1*Math.cos(I),1*Math.sin(I),0,0,0)),0<k&&r.push(0,k,k+1);m.push.apply(m,f.slice(0,4));m.push.apply(m,l);r.push(0,H,H+1);var L=b.length/p;b.push.apply(b,m);c.push.apply(c,r.map(function(a){return a+L}));return m.length/p}function c(c,d,e,f,k,l){function r(a,b,c,d,e){var f=void 0;a.Xu(b)||s.J5(a,b)?f=b:c&&d&&e?f=a:c&&!d&&e?f=b:c||d||e?c||!d||e?(f=s.normalize(a.qk(b)),H=s.cos(f,a),f=f.ms(H)):f=a:f=b;return f}function q(a,b,c){if(void 0===c||!0===c)d.push(a[0],a[1]),d.push(-b.y,b.x,0,0),d.push(G, 0,0),l.push(a[2]);if(void 0===c||!1===c)d.push(a[0],a[1]),d.push(b.y,-b.x,0,0),d.push(G,0,0),l.push(a[2])}function D(a,b){var c=a*p,e=c+p,f=e+p,k=f+p,l=m;I?(f=n(d.slice(e,f)),c=n(d.slice(c,e)),c=s.normalize((new h(f)).yf(new h(c))),c=Math.abs(s.cos(b,c)/s.sin(b,c)*2),d[e+l]=-c,d[k+l]=c):(k=n(d.slice(c,e)),e=n(d.slice(e,f)),e=s.normalize((new h(k)).yf(new h(e))),e=Math.abs(s.cos(e,b)/s.sin(e,b)*2),d[c+l]=-e,d[f+l]=e)}var A=c.length,B=0,G=0,H=void 0,I=void 0;k&&(f="bevel");for(var P=0,L=c.length;P< L;P+=1){var M=c[P-1],K=c[P],F=c[P+1],Q=void 0;M&&(G+=s.Td(K,M));if(0===P||P===A-1)0===P?(void 0===F&&(F=K),M=K,Q=s.normalize(new h(F[0]-K[0],F[1]-K[1])),e.push(0,1,2)):(F=K,Q=s.normalize(new h(K[0]-M[0],K[1]-M[1])),F=d.length/p+2,4===F?e.push(3,2,1):e.push(F-3-B,F-1,F-2)),q(K,Q);else{var N=s.normalize(new h(K[0]-M[0],K[1]-M[1])),J=s.normalize(new h(F[0]-K[0],F[1]-K[1])),O=s.normalize(N.multiply(-1).qk(J)),I=s.BS(O,N),H=s.cos(O,N);q(K,r(N,J,I,!0,!0),!0);q(K,r(N,J,I,!0,!1),!1);q(K,r(N,J,I,!1,!0),!0); q(K,r(N,J,I,!1,!1),!1);F=d.length/p;Q=F-4;M=Q+2;D(Q,N);s.J5(N,J)?e.push(Q,Q+1,Q-2-B):e.push(Q,Q-1-B,Q+1);"miter"==f&&(I?q(K,r(N,J,0,!0,!0),!0):q(K,r(N,J,0,!0,!0),!1),B=1);if("round"===f){J=N=B=void 0;I?(B=d.slice((Q+1)*p,(Q+2)*p),N=d.slice(Q*p,(Q+1)*p),J=d.slice(M*p,(M+1)*p)):(B=d.slice(Q*p,(Q+1)*p),N=d.slice((Q+1)*p,(Q+2)*p),J=d.slice((M+1)*p,(M+2)*p));B=a(d,e,B,N,J,O.multiply(-1));if(l)for(;0<B--;)l.push(K[2]);B=d.length/p-F}e.push(M,M+1,M+2+B);k||"bevel"!=f&&"miter"!=f||(I?e.push(M,Q,Q+1):e.push(M, M-1,M+1),"miter"==f&&(I?e.push(M+2,M-2,M):e.push(M+2,M+1,M-1)))}}}function d(a,b,c,d){function e(a,b){var c=void 0;if(a.Xu(b))c=b;else{var c=s.normalize(a.qk(b)),d=s.cos(c,a);d>Math.sqrt(3)/2&&(d=Math.sqrt(3)/2);c=c.ms(d)}return c}function f(a,c,e){if(void 0===e||!0===e)b.push(a[0],a[1]),b.push(-c.y,c.x,0,0),b.push(n,0,0),d.push(a[2]);if(void 0===e||!1===e)b.push(a[0],a[1]),b.push(c.y,-c.x,0,0),b.push(n,0,0),d.push(a[2])}for(var k=a[0],l=a[a.length-1],n=0,r=void 0;k[0]===l[0]&&k[1]===l[1]&&k!==l;)a.pop(), l=a[a.length-1];a.push(k);a.push(a[1]);a.unshift(l);var q=a.length;a.forEach(function(a,d,k){var l=k[d-1];k=k[d+1];var u=void 0;l&&(n+=s.Td(a,l));if(0===d||d===q-1)0===d?(u=s.normalize(new h(k[0]-a[0],k[1]-a[1])),c.push(0,1,2)):(u=s.normalize(new h(a[0]-l[0],a[1]-l[1])),d=b.length/p+2,c.push(d-3,d-1,d-2)),f(a,u);else{d=s.normalize(new h(a[0]-l[0],a[1]-l[1]));k=s.normalize(new h(k[0]-a[0],k[1]-a[1]));l=s.normalize(d.multiply(-1).qk(k));r=s.BS(l,d);f(a,e(d,k),!0);f(a,e(d,k),!1);f(a,e(d,k),!0);f(a,e(d, k),!1);a=b.length/p-4;k=a+2;var u=a*p,t=u+p,E=t+p,C=E+p;d=Math.abs(s.cos(d,l)/s.sin(d,l));l=m;r?(b[u+l]=d,b[t+l]=-d,b[E+l]=-d,b[C+l]=d):(b[u+l]=-d,b[t+l]=d,b[E+l]=d,b[C+l]=-d);c.push(a,a-1,a+1);c.push(k,k+1,k+2)}})}function e(c,d,e){function f(a,b){if(r)for(;0<a--;)r.push(b)}function m(a,b){A.push.apply(A,a.slice(0,k));A.push(b.x,b.y);A.push.apply(A,a.slice(l));A.push.apply(A,a)}var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"butt",r=arguments[4],q=c.length-1,D=d.length,A=[],B=[],G= [d.slice(0,p),d.slice(p,2*p)],H=[d.slice(D-p,D),d.slice(D-2*p,D-p)];"square"===n?(n=s.normalize((new h(c[0])).yf(new h(c[1]))),m(G[0],n),m(G[1],n),n=s.normalize((new h(c[q])).yf(new h(c[q-1]))),m(H[0],n),m(H[1],n),B.push(0,2,3,3,1,0),B.push(6,7,4,4,7,5),r&&(r.push(c[0][2]),r.push(c[q][2]))):"round"===n&&(n=G[0].slice(0,2).concat(0,0,0,0).concat(G[0].slice(l)),G=a(d,e,n,G[0],G[1],s.normalize((new h(c[0])).yf(new h(c[1])))),f(G,c[0][2]),n=H[0].slice(0,2).concat(0,0,0,0).concat(H[0].slice(l)),G=a(d, e,n,H[0],H[1],s.normalize((new h(c[q])).yf(new h(c[q-1])))),f(G,c[q][2]));d.push.apply(d,A);e.push.apply(e,B.map(function(a){return a+D/p}))}function f(a,b){var c=[];a.forEach(function(a){var d=a[0],e=a[1];a=a[2];b&&(d-=r[0],e-=r[1]);var f=c.length-1;if(-1===f)c.push([d,e,a]);else if(d!==c[f][0]||e!==c[f][1]||a!==c[f][2])if(1<=f){var k=s.normalize(new h(d-c[f][0],e-c[f][1])),l=s.normalize(new h(c[f][0]-c[f-1][0],c[f][1]-c[f-1][1]));k.Xu(l)&&a===c[f][2]?c[f]=[d,e,a]:c.push([d,e,a])}else c.push([d, e,a])});return c}function h(a,b){"object"===typeof a&&a.length&&(b=a[1],a=a[0]);this.x=a;this.y=b}var k,l,m;function n(a){return[a[0]+q*a[2],a[1]+q*a[3]]}var p=9,q=1;k=4;l=6;m=7;var r=[215440491,106744817],s={normalize:function(a){var b=this.length(a);return a.ms(b)},Lf:function(a,b){return a.multiply(b)},gs:function(a,b){return a.x*b.y-a.y*b.x},length:function(a){return Math.sqrt(Math.pow(a.x,2)+Math.pow(a.y,2))},sin:function(a,b){return this.gs(a,b)/(this.length(a)*this.length(b))},cos:function(a, b){return this.Lf(a,b)/(this.length(a)*this.length(b))},BS:function(a,b){return 0<this.gs(a,b)},Td:function(a,b){return Math.sqrt(Math.pow(b[0]-a[0],2)+Math.pow(b[1]-a[1],2))},J5:function(a,b){return a.multiply(-1).Xu(b)},xJ:function(a){a=Math.atan2(a.y,a.x);0>=a&&(a+=2*Math.PI);return a}};h.prototype={qk:function(a){return new h(this.x+a.x,this.y+a.y)},yf:function(a){return new h(this.x-a.x,this.y-a.y)},multiply:function(a){return"number"===typeof a?new h(this.x*a,this.y*a):this.x*a.x+this.y*a.y}, ms:function(a){return new h(this.x/a,this.y/a)},Xu:function(a){var b=a.y;return this.x===a.x&&this.y===b}};return{parse:function(a,b){var h=a.lineJoin,h=void 0===h?"bevel":h,k=a.lineCap,k=void 0===k?"butt":k,l=a.Msa,l=void 0===l?!1:l,m=a.bz,n=void 0===m?!1:m,r=a.r7,m=a.Iya,s=void 0===m?!0:m,m=a.Csa,q=[],B=[],G=f(a.Mv,void 0===r?!0:r),r=[];l?(d(G,q,B,r),h=q.length,[0,1,2,h/p-1,h/p-2].forEach(function(a){q[a*p+8]=-1})):(c(G,q,B,h,n,r),e(G,q,B,k,r));s&&(q=new Float32Array(q),B=65535<q.length/9?new Uint32Array(B): new Uint16Array(B));h=[q,B];m&&h.push(r);if(b)b(null,{data:h});else return h}}}g.GV=a();g.Uza=new g.IA(a,{lazy:"untilCall"})})();g.Im={usa:function(a,b,c){b=g.Im.createProgram(a,b,c);if(!b)return console.log("Failed to create program"),!1;a.useProgram(b);a.pa=b;return!0},createProgram:function(a,b,c){b=g.Im.q6(a,a.VERTEX_SHADER,b);c=g.Im.q6(a,a.FRAGMENT_SHADER,c);if(!b||!c)return null;var d=a.createProgram();if(!d)return null;a.attachShader(d,b);a.attachShader(d,c);a.bindAttribLocation(d,0,"a_Position");a.linkProgram(d);var e=a.getProgramParameter(d,a.LINK_STATUS);a.deleteShader(c);a.deleteShader(b);return e?d:(console.log("Failed to link program: "+ a.getProgramInfoLog(d)),a.deleteProgram(d),null)},q6:function(a,b,c){b=a.createShader(b);if(null===b)return console.log("unable to create shader"),null;a.shaderSource(b,c);a.compileShader(b);return a.getShaderParameter(b,a.COMPILE_STATUS)?b:(console.log("Failed to compile shader: "+a.getShaderInfoLog(b)),a.deleteShader(b),null)},Ef:function(a,b,c,d){var e=d;"number"!==typeof d&&(e=d.toString());if(c.B1!==e){var f="uniform"+b;if(2===b.length)a[f].apply(a,[c].concat(d));else a[f](c,d);c.B1=e}},HC:function(a){a.length|| (a=[a]);for(var b=0,c=a.length;b<c;b++)delete a[b].B1}};g.M.Xe.od=g.M.be.Ti.extend({ka:[g.Xw],A:function(a,b){this.hj=20;this.Ua=Math.min(2,window.devicePixelRatio||1);this.Zo=1;arguments.callee.ma.apply(this,arguments);this.X("mapStyle",a.e);this.X("style",a.e);this.jl=this.Di=!0;a.e.D.vq&&this.yC(a,b);this.$n=0;this.Vk={};this.wJ()||this.set("reload")},Hq:function(){this.oa.forEach(function(a){this.Kf(a)},this);this.ca.deleteProgram(this.ca.pa);g.F.G(this.xa,"webglcontextlost",this.wz,this);var a=this.ca.getExtension("WEBGL_lose_context");a&&a.loseContext(); this.xa=this.ca=null;for(var b in this)this.hasOwnProperty(b)&&g.a.$xa(b,"u_")&&delete this[b];arguments.callee.ma.apply(this,arguments)},Kf:function(a){if(a.ra){if(a.ra.region&&a.ra.region.length){for(var b=a.ra.region.buffer,c=0,d=a.ra.region.length;c<d;c+=1){var e=a.ra.region[c];e[2]=null;e[4]=null}if(b){this.ca.deleteBuffer(b.Z);this.ca.deleteBuffer(b.bc);for(var f in b)b.hasOwnProperty(f)&&(b[f]=null);a.ra.region.buffer=null}delete a.ra.region}if(a.ra.road){for(c in a.ra.road)if(a.ra.road.hasOwnProperty(c))if("buffer"!== c)delete a.ra.road[c];else if(b=a.ra.road.buffer){if(b.Z&&b.Z.length)for(d=0,e=b.Z.length;d<e;d++)this.ca.deleteBuffer(b.Z[d]),this.ca.deleteBuffer(b.bc[d]);for(f in b)b.hasOwnProperty(f)&&(b[f]=null);a.ra.road.buffer=null}delete a.ra.road}if(a.ra.building){c=0;for(d=a.ra.building.length;c<d;c+=1)e=a.ra.building[c],this.ca.deleteBuffer(e[0]),e[0]=null,e[1]&&this.ca.deleteBuffer(e[1]),e[1]=null,this.ca.deleteBuffer(e[2]),e[2]=null,e[3]=null,e[4]=null,e[5]=null;delete a.ra.building}delete a.ra}},zba:"precision highp float;attribute vec4 a_Position;attribute vec3 a_op,a_Next,a_Previous;attribute float a_Tags;uniform float u_xDelta,u_width;uniform lowp int u_type;uniform mat4 u_othMatrix,u_zoomMatrix,u_modelMatrix;uniform float u_scale;varying float v_distance;varying vec2 v_op;varying float v_TB;varying float v_cap;varying lowp float v_Tags;void main() {vec4 position=a_Position;position.x+=u_xDelta;if (u_type==0) {gl_Position=u_othMatrix*u_zoomMatrix*u_modelMatrix*position;}else if(u_type>1) {v_op=a_op.xy;v_TB=a_op.z;vec3 curPos=position.xyz;v_distance=a_Next.z;float ddis=0.0;vec3 previous=vec3(a_Previous.x+u_xDelta,a_Previous.y,0);vec3 next=vec3(a_Next.x+u_xDelta,a_Next.y,0);vec4 up,dir;v_distance *= u_scale;if(previous==curPos){ dir= vec4(normalize(next-curPos).xy,0,0);}else if(next==curPos){dir= -vec4(normalize(previous-curPos).xy,0,0);}else {vec3 dir0=previous-curPos;vec3 dir1=next-curPos;vec3 dir2=normalize(dir0);vec3 dir3=normalize(dir1);float f0=dir0.x*dir1.y-dir1.x*dir0.y;dir = vec4(0); v_cap=1.0;if(f0==0.0){up = vec4(dir3.y,-dir3.x,0,0); }else{vec3 dir4=normalize(dir2+dir3);float sinA=length(cross(dir4,dir2));float cosA=dot(dir4,dir2);if(sinA<0.5){sinA=0.5;}up= vec4(dir4,0)/sinA;ddis=abs(length(up)*cosA*u_width*0.5);if(f0<0.0){up=-up;ddis=-ddis;}v_distance += v_TB*a_Previous.z*ddis;}}if(previous==curPos||next==curPos){ up = vec4(dir.y,-dir.x,0,0); if(u_type==4){v_cap=sqrt(v_TB*v_TB+a_Previous.z*a_Previous.z);}else if(u_type==3){v_cap=1.0;}else{dir = vec4(0);}}vec4 pos=u_zoomMatrix*u_modelMatrix*position;pos=pos+(up*v_TB-dir*a_Previous.z)*u_width*0.5;gl_Position=u_othMatrix*pos;}else if (u_type==1) {v_Tags=a_Tags;gl_Position=u_othMatrix*u_zoomMatrix*u_modelMatrix*position;}}", jaa:"precision lowp float;uniform vec4 u_FragColor,u_FragColor2;varying lowp float v_distance,v_TB;varying vec2 v_op;varying lowp float v_Tags;varying float v_cap;uniform lowp int u_type;uniform int u_isDash,u_onlyBorder;uniform vec4 u_dash;void main() {vec4 color=u_FragColor;if (u_type==0) {}else if(u_type>1) {if(v_op.x<-0.2||v_op.x>256.2||v_op.y<-0.2||v_op.y>256.2){discard;}if(v_cap>1.0){discard;}if(u_isDash==1){float all = u_dash[0] + u_dash[1] + u_dash[2] + u_dash[3];float off = mod(v_distance - u_dash[0], all);if(off> u_dash[0]&&off<=(u_dash[0]+u_dash[1])||off>(all-u_dash[3])){discard;}}if(u_onlyBorder==1&&v_TB<=0.7&&v_TB>=-0.7){discard;}}else if(u_type==1) {color=v_Tags==3.0?u_FragColor2:vec4((u_FragColor+(u_FragColor2-u_FragColor)*v_Tags/3.0).xyzw);}gl_FragColor=color;}", reloadChanged:function(){this.g&&(this.g.Ra=!1);this.oa.clear();this.xa&&this.xa.parentNode&&this.xa.parentNode.removeChild(this.xa);this.set("display")},zz:function(a){if(this.g&&a.LS===this.g.lc)for(var b=0,c=a.Oc.length;b<c;b+=1)this.cE(a.Oc[b],a.jz,a.Qq,a.ba)},YT:function(a,b){for(var c=this.ca,d=a.buffer,e=0,f=a.length;e<f;e+=1){var h=a[e];this.e.Bm&&h[3]&&!this.e.Bd&&(h[2]=this.J.ws(h[2],h[3],!1,b),d.We[e][0]=h[2])}d.Z=this.yd(c.ARRAY_BUFFER,d.Z);d.bc=this.yd(c.ELEMENT_ARRAY_BUFFER,d.bc)},uU:function(a, b){for(var c=this.ca,d=a.buffer,e=0,f=a.buffer.Z.length;e<f;e++)d.Z[e]=this.yd(c.ARRAY_BUFFER,d.Z[e]),d.bc[e]=this.yd(c.ELEMENT_ARRAY_BUFFER,d.bc[e]);if(this.e.Bm&&!this.e.Bd){var c=d.hash,d=null,h;for(h in c)if(c.hasOwnProperty(h))for(e=0,f=a[h].length;e<f;e++)d=a[h][e],d[10]&&(d[1]=this.J.im(d[1],d[10],1,!1,b),d[4]=this.J.im(d[4],d[10],0,!1,b))}},WP:function(a,b){for(var c=0,d=a.length;c<d;c+=1){var e=a[c];e.TD=e[0].length/3;e[0]=this.yd(this.ca.ARRAY_BUFFER,e[0]);e.WJ=e[1].length/3;e[1]=this.yd(this.ca.ARRAY_BUFFER, e[1]);e.UD=e[2].length/3;e[2]=this.yd(this.ca.ARRAY_BUFFER,e[2]);if(this.e.Bm&&e[3][2]&&!this.e.Bd){var f=this.J.Ly(e[3][0],e[3][1],e[3][2],!1,b);e[3][0]=f[0];e[3][1]=f[1]}}},yd:function(a,b){if(b.length){var c=this.ca,d=c.createBuffer();c.bindBuffer(a,d);c.bufferData(a,b,c.STATIC_DRAW);return d}},cE:function(a){var b=a.Ed,c=this.oa.get(a.Oi);if(c){var d=a.Hg.z;c.ra[b]=a.Oa;"region"===b?this.YT(a.Oa,d):"road"===b?this.uU(a.Oa,d):"building"===b&&(this.WP(a.Oa,d),a.Bn&&a.Bn.length&&!c.pe&&(c.pe={}, c.pe.tf=a.Bn,g.Lj&&g.Lj.q("vecTileParsed.buildings",{qp:c})));b===this.g.ga[this.g.ga.length-1]&&(c.Ba=!0,this.set("display"))}},zd:function(){if(this.vg&&!this.g.Ra){var a=this.g;a.Ra=!0;a.Jd?a.qa("renderComplete"):(a.Jd=!0,a.qa("complete"))}},oc:function(a,b){!window.oa&&this.oa&&(window.oa=this.oa);this.rp=a.rp;this.fp(a,b);this.zd();a.vD||(a.pma=this.vg,this.Lz(a,b),this.Is=this.lb,this.ye&&this.set("display",0))},uj:function(){return this.xa},wz:function(){g.M.Xe.od.es+=1;this.xa&&g.F.G(this.xa, "webglcontextlost",this.wz,this);this.xa.parentNode&&this.xa.parentNode.removeChild(this.xa);if(1<g.M.Xe.od.es)this.gK();else{var a=this.xa.className;this.xa=document.createElement("canvas");this.xa.className=a;this.wJ()}this.set("reload");new g.jb.zb(g.r.tc+"://webapi.amap.com/count?"+["type=glfail","c="+g.M.Xe.od.es,"crd="+g.l.SR,"k="+g.r.key,"u="+g.r.Tp,"m="+(g.l.ba?1:0),"pf="+g.l.Dz,"dpr="+window.devicePixelRatio,"scale="+(g.l.xL||0),"detect="+g.l.ja].join("&"))},gK:function(){g.l.Mf=!1;this.g&& this.g.e.D&&(this.g.e.set("baseRender",g.l.Wp?"dv":"d"),this.g.e.D.YS(),this.g.M=null,this.g.S.Zs(),this.g=null);this.xa=this.J=null},Yg:function(a){this.xa=document.createElement("canvas");this.xa.className=a||"amap-layer"},wJ:function(){if(1<g.M.Xe.od.es)return this.gK(),!1;var a=this.ca=this.xa.getContext(g.l.x$,g.l.y$);if(a)g.F.h(this.xa,"webglcontextlost",this.wz,this);else return this.gK(),!1;g.Im.usa(a,this.zba,this.jaa);this.uV=a.getUniformLocation(a.pa,"u_xDelta");this.i$=a.getUniformLocation(a.pa, "u_othMatrix");this.m$=a.getUniformLocation(a.pa,"u_zoomMatrix");this.g$=a.getUniformLocation(a.pa,"u_modelMatrix");this.Qd=a.getAttribLocation(a.pa,"a_Position");this.gj=a.getAttribLocation(a.pa,"a_op");this.fj=a.getAttribLocation(a.pa,"a_Previous");this.Qg=a.getAttribLocation(a.pa,"a_Next");this.Zx=a.getAttribLocation(a.pa,"a_Tags");a.enableVertexAttribArray(this.Qd);this.Jj=a.getUniformLocation(a.pa,"u_FragColor");this.eA=a.getUniformLocation(a.pa,"u_FragColor2");this.yk=a.getUniformLocation(a.pa, "u_type");this.uw=a.getUniformLocation(a.pa,"u_width");this.kV=a.getUniformLocation(a.pa,"u_isDash");this.mV=a.getUniformLocation(a.pa,"u_onlyBorder");this.hV=a.getUniformLocation(a.pa,"u_dash");this.rV=a.getUniformLocation(a.pa,"u_scale");a.enable(a.BLEND);a.enable(a.CULL_FACE);a.cullFace(a.FRONT);a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD);a.blendFuncSeparate(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA);a.clearColor(0,0,0,0);this.oT=this.yQ=this.bz=void 0;this.oA=0;return!0}, Vv:function(a){var b=Math.pow(2,a.P.zoom-this.Cf),c=a.P.lb.ab(this.Is).ld(this.wm);this.transform={translate:this.transform[0].translate.add(c),scale:b,rotate:0};this.lb=a.P.lb},Lz:function(a,b){var c=this.NP(a,b),d=this.ca,e=this.J.De;"function"===typeof e&&e(a.P.zoom);d.clear(d.COLOR_BUFFER_BIT);var e=this.g.ja?this.Ua:this.Zo,f=0,h=0;0!==a.P.rotation?(f=2*Math.floor(a.P.Ha.Ac.x)*e,h=2*Math.floor(a.P.Ha.Ac.y)*e):(f=a.size.width*e,h=a.size.height*e);f&&h&&(this.xa.width=f,this.xa.height=h,d.viewport(0, 0,this.xa.width,this.xa.height),this.$s.apply(this,c),this.Ne(a))},Zq:256*Math.pow(2,20),JQ:function(a,b){g.Im.HC([this.Jj]);for(var c=this.J.ae,d=0,e=b.length;d<e;d++){var f=b[d],h=f.ob?f.ob.ra:f.ra;if(!h)break;if((h=h.region)&&h.length){this.Xr(f.al*this.Zq);f=h.buffer;a.bindBuffer(a.ARRAY_BUFFER,f.Z);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,f.bc);for(var k=0,l=f.tp.length;k<l;k++){var m=f.We[k],n=m[0];(m=m[1])&&c&&(n=this.J.ws(n,m),h[k].vd=n);n&&(a.vertexAttribPointer(this.Qd,2,a.FLOAT,!1,8,0),a.uniform4f(this.Jj, n[0],n[1],n[2],n[3]),a.drawElements(a.TRIANGLES,f.tp[k][0],a.UNSIGNED_SHORT,f.tp[k][1]))}}}},KQ:function(a,b){var c=g.Im,d=this.g.ja?this.Ua:this.Zo,e=this.J.ae;c.HC([this.Jj,this.yk,this.uw]);for(var f={},h=0,k=b.length;h<k;h++){var l=b[h];if(l=l.ob?l.ob.ra:l.ra)if(l=l.road){var l=l.buffer.hash,m;for(m in l)l.hasOwnProperty(m)&&(f[m]?f[m].push(h):f[m]=[h])}}for(var n in f)if(f.hasOwnProperty(n))for(h=f[n],k=0,m=h.length;k<m;k++){for(var l=b[h[k]],p=(l.ob?l.ob.ra:l.ra).road,q=p.buffer,r=q.hash[n], p=p[n],s=!1,u=0,v=p.length;u<v;u++){var w=p[u],t=w,x=r[u],y=t[4],E=t[12],C=this.FN(t)[1],D=t[0];t.Lg&&(D=t.Lg.Jg[0]);E&&e&&(y=this.J.im(y,E,0),w.vd=y,(w=this.J.jv(E))&&w.strokeWidth&&w.fillWidth?C=w.fillWidth+2*w.strokeWidth:w&&w.strokeWidth?C=D+2*w.strokeWidth:w&&w.fillWidth&&(C=w.fillWidth+C-D));if(y&&C){c.Ef(a,"1i",this.yk,"square"===t[9]?3:"round"===t[9]?4:2);this.Xr(l.al*this.Zq);if(0===u||s)a.bindBuffer(a.ARRAY_BUFFER,q.Z[x[0]]),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,q.bc[x[0]]),s&&(s=!1);a.vertexAttribPointer(this.Qd, 2,a.FLOAT,!1,44,0);a.vertexAttribPointer(this.gj,3,a.FLOAT,!1,44,8);a.vertexAttribPointer(this.fj,3,a.FLOAT,!1,44,20);a.vertexAttribPointer(this.Qg,3,a.FLOAT,!1,44,32);c.Ef(a,"1f",this.uw,C*d);c.Ef(a,"4f",this.Jj,y);this.Xp(t[5]?1:0,t[5],0);a.drawElements(a.TRIANGLES,x[1],a.UNSIGNED_SHORT,x[2])}else 0===u&&1<p.length&&(s=!0)}s=!1;u=0;for(v=p.length;u<v;u++)if(t=w=p[u],x=r[u],y=t[1],D=t[12],C=t.Lg.Jg[0],D&&e&&(y=this.J.im(y,D,1),w.vd=y,(w=this.J.jv(D))&&w.fillWidth&&(C=w.fillWidth)),C&&y){c.Ef(a,"1i", this.yk,"square"===t[8]?3:"round"===t[8]?4:2);this.Xr(l.al*this.Zq);if(0===u||s)a.bindBuffer(a.ARRAY_BUFFER,q.Z[x[0]]),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,q.bc[x[0]]),s&&(s=!1);a.vertexAttribPointer(this.Qd,2,a.FLOAT,!1,44,0);a.vertexAttribPointer(this.gj,3,a.FLOAT,!1,44,8);a.vertexAttribPointer(this.fj,3,a.FLOAT,!1,44,20);a.vertexAttribPointer(this.Qg,3,a.FLOAT,!1,44,32);c.Ef(a,"1f",this.uw,C*d);c.Ef(a,"4f",this.Jj,y);this.Xp(t[2]?1:0,t[2],t[6]?1:0);a.drawElements(a.TRIANGLES,x[1],a.UNSIGNED_SHORT, x[2])}else 0===u&&1<p.length&&(s=!0)}},dc:new g.H(215440491,106744817),$s:function(a,b,c){if(a.length){this.gd+=1;b=this.xa.width;c=this.xa.height;var d=this.ca;b=(new g.Cc).EU(-b/2,b/2,c/2,-c/2,0,1);c=Math.pow(2,this.zoom-this.hj)*(this.g.ja?this.Ua:this.Zo);c=(new g.Cc).scale(c,c,1);var e=this.lb.ld(this.T/Math.pow(2,this.hj-this.zoom)).ab(this.dc),e=(new g.Cc).translate(-e.x,-e.y,0);d.uniformMatrix4fv(this.i$,!1,b.elements);d.uniformMatrix4fv(this.m$,!1,c.elements);d.uniformMatrix4fv(this.g$,!1, e.elements);d.uniform1f(this.rV,Math.pow(2,this.zoom-this.hj)*(this.g.ja?this.Ua:1));b=this.Nk=[];for(c=a.length-1;0<=c;c-=1){e=a[c];d.disableVertexAttribArray(this.gj);d.disableVertexAttribArray(this.fj);d.disableVertexAttribArray(this.Qg);d.disableVertexAttribArray(this.Zx);this.Xp(0,void 0,void 0);d.uniform1i(this.yk,0);this.Xr(0);for(var f=0,h=e.length;f<h;f+=1){var k=e[f];if(k.ob?k.ob.ra:k.ra)k.gd=this.gd,b.push(k)}this.JQ(d,e);d.enableVertexAttribArray(this.gj);d.enableVertexAttribArray(this.fj); d.enableVertexAttribArray(this.Qg);d.disableVertexAttribArray(this.Zx);e.length&&this.KQ(d,e);if(!(14>this.zoom))for(d.uniform1i(this.yk,1),this.Xp(0,void 0,void 0),d.disableVertexAttribArray(this.gj),d.disableVertexAttribArray(this.fj),d.disableVertexAttribArray(this.Qg),d.enableVertexAttribArray(this.Zx),f=0,h=e.length;f<h;f+=1)k=e[f],(k.ob?k.ob.ra:k.ra)&&(k.ob?k.ob.ra:k.ra).building&&this.DI(d,k)}}},DI:function(a,b){for(var c=this.J.ae,d=(b.ob?b.ob.ra:b.ra).building,e=0;e<d.length;e+=1){var f= d[e],h=f[3][0],k=f[3][1];if(!f||!h)break;var l=f[3][2];l&&c&&(k=this.J.Ly(h,k,l),h=k[0],k=k[1],f.vd=h);if(h||k)h||(h=[0,0,0,0]),k||(k=[0,0,0,0]),a.uniform4f(this.eA,h[0],h[1],h[2],h[3]),a.uniform4f(this.Jj,k[0],k[1],k[2],k[3]),f.TD&&(a.bindBuffer(a.ARRAY_BUFFER,f[0]),a.vertexAttribPointer(this.Qd,2,a.FLOAT,!1,12,0),a.vertexAttribPointer(this.Zx,1,a.FLOAT,!1,12,8),a.drawArrays(a.TRIANGLES,0,f.TD)),f.UD&&(a.bindBuffer(a.ARRAY_BUFFER,f[2]),a.vertexAttribPointer(this.Qd,2,a.FLOAT,!1,12,0),a.vertexAttribPointer(this.Zx, 1,a.FLOAT,!1,12,8),a.drawArrays(a.LINES,0,f.UD)),f.WJ&&(a.bindBuffer(a.ARRAY_BUFFER,f[1]),a.vertexAttribPointer(this.Qd,2,a.FLOAT,!1,12,0),a.vertexAttribPointer(this.Zx,1,a.FLOAT,!1,12,8),a.drawArrays(a.TRIANGLES,0,f.WJ))}},Xp:function(a,b,c){var d=this.ca;a!==this.bz&&(d.uniform1i(this.kV,a),this.bz=a);a&&b!==this.yQ&&(this.yQ=b,d.uniform4f(this.hV,b[0],b[1],b[2]||0,b[3]||0));c!==this.oT&&(d.uniform1i(this.mV,c),this.oT=c)},Xr:function(a){a!==this.oA&&(this.ca.uniform1f(this.uV,a),this.oA=a)},Ne:function(){this.transform= {translate:{x:this.xa.width/2,y:this.xa.height/2},scale:this.g.ja?1/this.Ua:1/this.Zo,rotate:0}},wP:function(a,b,c){var d=null;if(a.length&&c)d=a[11].id+"-"+c,this.Vk[d]&&(a[0]=this.Vk[d][0],a[3]=this.Vk[d][3]);else return c=[],b&&b[0]&&(c=b[0].split("&")),(b=c[2])&&0===b.indexOf("railway")?(a[0]=1,a[3]=3):a[0]=parseInt(c[0])||0,c[3]&&c[4]&&3<c.length?(a[3]=a[0]+parseInt(c[3]),0===g.a.indexOf(c[5],"dash")&&(a[3]+=1)):a[3]=0,d&&void 0===this.Vk[d]&&(this.Vk[d]=[a[0],0,0,a[3]]),a},FN:function(a){var b= this.zoom;if(a.Lg&&a.Lg.zoom===b)return a.Lg.Jg;var c=a[11].browserStyle,d=a[11].levelStyleMapping;if(18<this.zoom){var e=this.Pk(a,18,c,d),c=Math.pow(2,this.zoom-18);a.Lg={zoom:b,Jg:[e[0]*c,e[3]*c]}}else if(g.a.I5(this.zoom))e=this.Pk(a,this.zoom,c,d),a.Lg={zoom:b,Jg:[e[0],e[3]]};else{var e=this.Pk(a,Math.floor(this.zoom),c,d),d=this.Pk(a,Math.ceil(this.zoom),c,d),f=function(a,b,c){var d;a&&b?d=a+c%1*(b-a):0===a&&b?d=Math.max(0,c%1-0.5)/0.5*b:0===a&&0===b?d=0:0!==a&&0===b&&(d=0);return g.a.wb(d, 3)},c=f(e[0],d[0],this.zoom),e=f(e[3],d[3],this.zoom);a.Lg={zoom:b,Jg:[c,e]}}return a.Lg.Jg},Pk:function(a,b,c,d){a=a[11].id+"-"+b;this.Vk[a]||(this.Vk[a]=this.wP([],c[d[b]]));return this.Vk[a]}});g.M.Xe.od.es=0;(function(){if(g.Ec&&!g.Ec.tS){var a=g.a.mD({Te:"anole",xu:"addTransferList"});g.Ec.tS=function(){var b="\\n      let handlers = {}\\n      let transferList = []\\n      let _handlers = [ ("+g.z$+")(true) ]\\n\\n      for (let i = 0, l = _handlers.length; i < l; i++) {\\n        let _handlerObj = _handlers[i]\\n\\n        for (let methodName in _handlerObj) {\\n          if (_handlerObj.hasOwnProperty(methodName)) {\\n            handlers[methodName] = _handlerObj[methodName]    \\n          }\\n        }\\n      }\\n\\n      handlers.anole = "+ JSON.stringify(g.Te)+";\\n\\n      handlers."+a.addTransferList+" = function(transferObjects) {\\n        transferList.push.apply(transferList, transferObjects)\\n      };\\n\\n      self.addEventListener(\'message\', function (e) {\\n        let data = e.data\\n\\n        // console.log(data.cmd, new Date().getTime() - data.ts)\\n\\n        if (data.cmd === \'ping\') {\\n          self.postMessage({\\n            ping: true,\\n            status: 200,\\n            ts: data.ts,\\n            _ts: new Date().getTime()\\n          })\\n\\n          return\\n        }\\n\\n        if (typeof handlers[data.cmd] === \'function\') {\\n\\n          data.args.push(function (err, result) {\\n            self.postMessage({\\n              err,\\n              result,\\n              taskId: data.taskId,\\n              parentTaskId: data.parentTaskId,\\n              ts: data.ts,\\n              _ts: new Date().getTime()\\n            }, transferList)\\n\\n            transferList = []\\n          })\\n\\n          if (handlers.anole) {\\n            data.args[0]."+ a.anole+" = handlers.anole\\n          }\\n        \\n          handlers[data.cmd].apply(handlers, data.args)\\n        }\\n      })\\n    ";if(b=g.a.createObjectURL(b))this.url=b,g.Ec.wf(null,{pna:b},function(){g.Ec.lsa()})}}})(); ');_jsload_('sync', '(function(){if(g.r.Mc){var a=function(){var a=g.r.Mc.split("."),b=window;do if(b=b[a.shift()],!b)return null;while(a.length);return b||null},b=function(b){var c=a();if(c){if("function"!==typeof c)throw Error(g.r.Mc+" is not a function!");setTimeout(c,1)}else if(b)throw Error("Can not find callback: "+g.r.Mc+", try define it before load JsApi!");};document.body&&a()?b():setTimeout(function(){b(!0)},300)}var c=(new Date).getTime(),c=["s=rsv3&product=JsInit&key="+g.r.key,"t="+c];c.push("resolution="+ window.screen.width+"*"+window.screen.height);c.push("mob="+(g.l.ba?1:0));c.push("vt="+(g.l.Wp?1:0));c.push("dpr="+window.devicePixelRatio);c.push("scale="+g.l.xL||0);c.push("detect="+g.l.ja);c=g.r.Zd+"/v3/log/init?"+c.join("&");new g.jb.zb(c,{callback:"callback"})})(); ')